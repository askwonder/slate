(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.SlateReact=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.Immutable=factory()})(this,function(){"use strict";var SLICE$0=Array.prototype.slice;function createClass(ctor,superClass){if(superClass){ctor.prototype=Object.create(superClass.prototype)}ctor.prototype.constructor=ctor}function Iterable(value){return isIterable(value)?value:Seq(value)}createClass(KeyedIterable,Iterable);function KeyedIterable(value){return isKeyed(value)?value:KeyedSeq(value)}createClass(IndexedIterable,Iterable);function IndexedIterable(value){return isIndexed(value)?value:IndexedSeq(value)}createClass(SetIterable,Iterable);function SetIterable(value){return isIterable(value)&&!isAssociative(value)?value:SetSeq(value)}function isIterable(maybeIterable){return!!(maybeIterable&&maybeIterable[IS_ITERABLE_SENTINEL])}function isKeyed(maybeKeyed){return!!(maybeKeyed&&maybeKeyed[IS_KEYED_SENTINEL])}function isIndexed(maybeIndexed){return!!(maybeIndexed&&maybeIndexed[IS_INDEXED_SENTINEL])}function isAssociative(maybeAssociative){return isKeyed(maybeAssociative)||isIndexed(maybeAssociative)}function isOrdered(maybeOrdered){return!!(maybeOrdered&&maybeOrdered[IS_ORDERED_SENTINEL])}Iterable.isIterable=isIterable;Iterable.isKeyed=isKeyed;Iterable.isIndexed=isIndexed;Iterable.isAssociative=isAssociative;Iterable.isOrdered=isOrdered;Iterable.Keyed=KeyedIterable;Iterable.Indexed=IndexedIterable;Iterable.Set=SetIterable;var IS_ITERABLE_SENTINEL="@@__IMMUTABLE_ITERABLE__@@";var IS_KEYED_SENTINEL="@@__IMMUTABLE_KEYED__@@";var IS_INDEXED_SENTINEL="@@__IMMUTABLE_INDEXED__@@";var IS_ORDERED_SENTINEL="@@__IMMUTABLE_ORDERED__@@";var DELETE="delete";var SHIFT=5;var SIZE=1<<SHIFT;var MASK=SIZE-1;var NOT_SET={};var CHANGE_LENGTH={value:false};var DID_ALTER={value:false};function MakeRef(ref){ref.value=false;return ref}function SetRef(ref){ref&&(ref.value=true)}function OwnerID(){}function arrCopy(arr,offset){offset=offset||0;var len=Math.max(0,arr.length-offset);var newArr=new Array(len);for(var ii=0;ii<len;ii++){newArr[ii]=arr[ii+offset]}return newArr}function ensureSize(iter){if(iter.size===undefined){iter.size=iter.__iterate(returnTrue)}return iter.size}function wrapIndex(iter,index){if(typeof index!=="number"){var uint32Index=index>>>0;if(""+uint32Index!==index||uint32Index===4294967295){return NaN}index=uint32Index}return index<0?ensureSize(iter)+index:index}function returnTrue(){return true}function wholeSlice(begin,end,size){return(begin===0||size!==undefined&&begin<=-size)&&(end===undefined||size!==undefined&&end>=size)}function resolveBegin(begin,size){return resolveIndex(begin,size,0)}function resolveEnd(end,size){return resolveIndex(end,size,size)}function resolveIndex(index,size,defaultIndex){return index===undefined?defaultIndex:index<0?Math.max(0,size+index):size===undefined?index:Math.min(size,index)}var ITERATE_KEYS=0;var ITERATE_VALUES=1;var ITERATE_ENTRIES=2;var REAL_ITERATOR_SYMBOL=typeof Symbol==="function"&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL="@@iterator";var ITERATOR_SYMBOL=REAL_ITERATOR_SYMBOL||FAUX_ITERATOR_SYMBOL;function Iterator(next){this.next=next}Iterator.prototype.toString=function(){return"[Iterator]"};Iterator.KEYS=ITERATE_KEYS;Iterator.VALUES=ITERATE_VALUES;Iterator.ENTRIES=ITERATE_ENTRIES;Iterator.prototype.inspect=Iterator.prototype.toSource=function(){return this.toString()};Iterator.prototype[ITERATOR_SYMBOL]=function(){return this};function iteratorValue(type,k,v,iteratorResult){var value=type===0?k:type===1?v:[k,v];iteratorResult?iteratorResult.value=value:iteratorResult={value:value,done:false};return iteratorResult}function iteratorDone(){return{value:undefined,done:true}}function hasIterator(maybeIterable){return!!getIteratorFn(maybeIterable)}function isIterator(maybeIterator){return maybeIterator&&typeof maybeIterator.next==="function"}function getIterator(iterable){var iteratorFn=getIteratorFn(iterable);return iteratorFn&&iteratorFn.call(iterable)}function getIteratorFn(iterable){var iteratorFn=iterable&&(REAL_ITERATOR_SYMBOL&&iterable[REAL_ITERATOR_SYMBOL]||iterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==="function"){return iteratorFn}}function isArrayLike(value){return value&&typeof value.length==="number"}createClass(Seq,Iterable);function Seq(value){return value===null||value===undefined?emptySequence():isIterable(value)?value.toSeq():seqFromValue(value)}Seq.of=function(){return Seq(arguments)};Seq.prototype.toSeq=function(){return this};Seq.prototype.toString=function(){return this.__toString("Seq {","}")};Seq.prototype.cacheResult=function(){if(!this._cache&&this.__iterateUncached){this._cache=this.entrySeq().toArray();this.size=this._cache.length}return this};Seq.prototype.__iterate=function(fn,reverse){return seqIterate(this,fn,reverse,true)};Seq.prototype.__iterator=function(type,reverse){return seqIterator(this,type,reverse,true)};createClass(KeyedSeq,Seq);function KeyedSeq(value){return value===null||value===undefined?emptySequence().toKeyedSeq():isIterable(value)?isKeyed(value)?value.toSeq():value.fromEntrySeq():keyedSeqFromValue(value)}KeyedSeq.prototype.toKeyedSeq=function(){return this};createClass(IndexedSeq,Seq);function IndexedSeq(value){return value===null||value===undefined?emptySequence():!isIterable(value)?indexedSeqFromValue(value):isKeyed(value)?value.entrySeq():value.toIndexedSeq()}IndexedSeq.of=function(){return IndexedSeq(arguments)};IndexedSeq.prototype.toIndexedSeq=function(){return this};IndexedSeq.prototype.toString=function(){return this.__toString("Seq [","]")};IndexedSeq.prototype.__iterate=function(fn,reverse){return seqIterate(this,fn,reverse,false)};IndexedSeq.prototype.__iterator=function(type,reverse){return seqIterator(this,type,reverse,false)};createClass(SetSeq,Seq);function SetSeq(value){return(value===null||value===undefined?emptySequence():!isIterable(value)?indexedSeqFromValue(value):isKeyed(value)?value.entrySeq():value).toSetSeq()}SetSeq.of=function(){return SetSeq(arguments)};SetSeq.prototype.toSetSeq=function(){return this};Seq.isSeq=isSeq;Seq.Keyed=KeyedSeq;Seq.Set=SetSeq;Seq.Indexed=IndexedSeq;var IS_SEQ_SENTINEL="@@__IMMUTABLE_SEQ__@@";Seq.prototype[IS_SEQ_SENTINEL]=true;createClass(ArraySeq,IndexedSeq);function ArraySeq(array){this._array=array;this.size=array.length}ArraySeq.prototype.get=function(index,notSetValue){return this.has(index)?this._array[wrapIndex(this,index)]:notSetValue};ArraySeq.prototype.__iterate=function(fn,reverse){var array=this._array;var maxIndex=array.length-1;for(var ii=0;ii<=maxIndex;ii++){if(fn(array[reverse?maxIndex-ii:ii],ii,this)===false){return ii+1}}return ii};ArraySeq.prototype.__iterator=function(type,reverse){var array=this._array;var maxIndex=array.length-1;var ii=0;return new Iterator(function(){return ii>maxIndex?iteratorDone():iteratorValue(type,ii,array[reverse?maxIndex-ii++:ii++])})};createClass(ObjectSeq,KeyedSeq);function ObjectSeq(object){var keys=Object.keys(object);this._object=object;this._keys=keys;this.size=keys.length}ObjectSeq.prototype.get=function(key,notSetValue){if(notSetValue!==undefined&&!this.has(key)){return notSetValue}return this._object[key]};ObjectSeq.prototype.has=function(key){return this._object.hasOwnProperty(key)};ObjectSeq.prototype.__iterate=function(fn,reverse){var object=this._object;var keys=this._keys;var maxIndex=keys.length-1;for(var ii=0;ii<=maxIndex;ii++){var key=keys[reverse?maxIndex-ii:ii];if(fn(object[key],key,this)===false){return ii+1}}return ii};ObjectSeq.prototype.__iterator=function(type,reverse){var object=this._object;var keys=this._keys;var maxIndex=keys.length-1;var ii=0;return new Iterator(function(){var key=keys[reverse?maxIndex-ii:ii];return ii++>maxIndex?iteratorDone():iteratorValue(type,key,object[key])})};ObjectSeq.prototype[IS_ORDERED_SENTINEL]=true;createClass(IterableSeq,IndexedSeq);function IterableSeq(iterable){this._iterable=iterable;this.size=iterable.length||iterable.size}IterableSeq.prototype.__iterateUncached=function(fn,reverse){if(reverse){return this.cacheResult().__iterate(fn,reverse)}var iterable=this._iterable;var iterator=getIterator(iterable);var iterations=0;if(isIterator(iterator)){var step;while(!(step=iterator.next()).done){if(fn(step.value,iterations++,this)===false){break}}}return iterations};IterableSeq.prototype.__iteratorUncached=function(type,reverse){if(reverse){return this.cacheResult().__iterator(type,reverse)}var iterable=this._iterable;var iterator=getIterator(iterable);if(!isIterator(iterator)){return new Iterator(iteratorDone)}var iterations=0;return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,iterations++,step.value)})};createClass(IteratorSeq,IndexedSeq);function IteratorSeq(iterator){this._iterator=iterator;this._iteratorCache=[]}IteratorSeq.prototype.__iterateUncached=function(fn,reverse){if(reverse){return this.cacheResult().__iterate(fn,reverse)}var iterator=this._iterator;var cache=this._iteratorCache;var iterations=0;while(iterations<cache.length){if(fn(cache[iterations],iterations++,this)===false){return iterations}}var step;while(!(step=iterator.next()).done){var val=step.value;cache[iterations]=val;if(fn(val,iterations++,this)===false){break}}return iterations};IteratorSeq.prototype.__iteratorUncached=function(type,reverse){if(reverse){return this.cacheResult().__iterator(type,reverse)}var iterator=this._iterator;var cache=this._iteratorCache;var iterations=0;return new Iterator(function(){if(iterations>=cache.length){var step=iterator.next();if(step.done){return step}cache[iterations]=step.value}return iteratorValue(type,iterations,cache[iterations++])})};function isSeq(maybeSeq){return!!(maybeSeq&&maybeSeq[IS_SEQ_SENTINEL])}var EMPTY_SEQ;function emptySequence(){return EMPTY_SEQ||(EMPTY_SEQ=new ArraySeq([]))}function keyedSeqFromValue(value){var seq=Array.isArray(value)?new ArraySeq(value).fromEntrySeq():isIterator(value)?new IteratorSeq(value).fromEntrySeq():hasIterator(value)?new IterableSeq(value).fromEntrySeq():typeof value==="object"?new ObjectSeq(value):undefined;if(!seq){throw new TypeError("Expected Array or iterable object of [k, v] entries, "+"or keyed object: "+value)}return seq}function indexedSeqFromValue(value){var seq=maybeIndexedSeqFromValue(value);if(!seq){throw new TypeError("Expected Array or iterable object of values: "+value)}return seq}function seqFromValue(value){var seq=maybeIndexedSeqFromValue(value)||typeof value==="object"&&new ObjectSeq(value);if(!seq){throw new TypeError("Expected Array or iterable object of values, or keyed object: "+value)}return seq}function maybeIndexedSeqFromValue(value){return isArrayLike(value)?new ArraySeq(value):isIterator(value)?new IteratorSeq(value):hasIterator(value)?new IterableSeq(value):undefined}function seqIterate(seq,fn,reverse,useKeys){var cache=seq._cache;if(cache){var maxIndex=cache.length-1;for(var ii=0;ii<=maxIndex;ii++){var entry=cache[reverse?maxIndex-ii:ii];if(fn(entry[1],useKeys?entry[0]:ii,seq)===false){return ii+1}}return ii}return seq.__iterateUncached(fn,reverse)}function seqIterator(seq,type,reverse,useKeys){var cache=seq._cache;if(cache){var maxIndex=cache.length-1;var ii=0;return new Iterator(function(){var entry=cache[reverse?maxIndex-ii:ii];return ii++>maxIndex?iteratorDone():iteratorValue(type,useKeys?entry[0]:ii-1,entry[1])})}return seq.__iteratorUncached(type,reverse)}function fromJS(json,converter){return converter?fromJSWith(converter,json,"",{"":json}):fromJSDefault(json)}function fromJSWith(converter,json,key,parentJSON){if(Array.isArray(json)){return converter.call(parentJSON,key,IndexedSeq(json).map(function(v,k){return fromJSWith(converter,v,k,json)}))}if(isPlainObj(json)){return converter.call(parentJSON,key,KeyedSeq(json).map(function(v,k){return fromJSWith(converter,v,k,json)}))}return json}function fromJSDefault(json){if(Array.isArray(json)){return IndexedSeq(json).map(fromJSDefault).toList()}if(isPlainObj(json)){return KeyedSeq(json).map(fromJSDefault).toMap()}return json}function isPlainObj(value){return value&&(value.constructor===Object||value.constructor===undefined)}function is(valueA,valueB){if(valueA===valueB||valueA!==valueA&&valueB!==valueB){return true}if(!valueA||!valueB){return false}if(typeof valueA.valueOf==="function"&&typeof valueB.valueOf==="function"){valueA=valueA.valueOf();valueB=valueB.valueOf();if(valueA===valueB||valueA!==valueA&&valueB!==valueB){return true}if(!valueA||!valueB){return false}}if(typeof valueA.equals==="function"&&typeof valueB.equals==="function"&&valueA.equals(valueB)){return true}return false}function deepEqual(a,b){if(a===b){return true}if(!isIterable(b)||a.size!==undefined&&b.size!==undefined&&a.size!==b.size||a.__hash!==undefined&&b.__hash!==undefined&&a.__hash!==b.__hash||isKeyed(a)!==isKeyed(b)||isIndexed(a)!==isIndexed(b)||isOrdered(a)!==isOrdered(b)){return false}if(a.size===0&&b.size===0){return true}var notAssociative=!isAssociative(a);if(isOrdered(a)){var entries=a.entries();return b.every(function(v,k){var entry=entries.next().value;return entry&&is(entry[1],v)&&(notAssociative||is(entry[0],k))})&&entries.next().done}var flipped=false;if(a.size===undefined){if(b.size===undefined){if(typeof a.cacheResult==="function"){a.cacheResult()}}else{flipped=true;var _=a;a=b;b=_}}var allEqual=true;var bSize=b.__iterate(function(v,k){if(notAssociative?!a.has(v):flipped?!is(v,a.get(k,NOT_SET)):!is(a.get(k,NOT_SET),v)){allEqual=false;return false}});return allEqual&&a.size===bSize}createClass(Repeat,IndexedSeq);function Repeat(value,times){if(!(this instanceof Repeat)){return new Repeat(value,times)}this._value=value;this.size=times===undefined?Infinity:Math.max(0,times);if(this.size===0){if(EMPTY_REPEAT){return EMPTY_REPEAT}EMPTY_REPEAT=this}}Repeat.prototype.toString=function(){if(this.size===0){return"Repeat []"}return"Repeat [ "+this._value+" "+this.size+" times ]"};Repeat.prototype.get=function(index,notSetValue){return this.has(index)?this._value:notSetValue};Repeat.prototype.includes=function(searchValue){return is(this._value,searchValue)};Repeat.prototype.slice=function(begin,end){var size=this.size;return wholeSlice(begin,end,size)?this:new Repeat(this._value,resolveEnd(end,size)-resolveBegin(begin,size))};Repeat.prototype.reverse=function(){return this};Repeat.prototype.indexOf=function(searchValue){if(is(this._value,searchValue)){return 0}return-1};Repeat.prototype.lastIndexOf=function(searchValue){if(is(this._value,searchValue)){return this.size}return-1};Repeat.prototype.__iterate=function(fn,reverse){for(var ii=0;ii<this.size;ii++){if(fn(this._value,ii,this)===false){return ii+1}}return ii};Repeat.prototype.__iterator=function(type,reverse){var this$0=this;var ii=0;return new Iterator(function(){return ii<this$0.size?iteratorValue(type,ii++,this$0._value):iteratorDone()})};Repeat.prototype.equals=function(other){return other instanceof Repeat?is(this._value,other._value):deepEqual(other)};var EMPTY_REPEAT;function invariant(condition,error){if(!condition)throw new Error(error)}createClass(Range,IndexedSeq);function Range(start,end,step){if(!(this instanceof Range)){return new Range(start,end,step)}invariant(step!==0,"Cannot step a Range by 0");start=start||0;if(end===undefined){end=Infinity}step=step===undefined?1:Math.abs(step);if(end<start){step=-step}this._start=start;this._end=end;this._step=step;this.size=Math.max(0,Math.ceil((end-start)/step-1)+1);if(this.size===0){if(EMPTY_RANGE){return EMPTY_RANGE}EMPTY_RANGE=this}}Range.prototype.toString=function(){if(this.size===0){return"Range []"}return"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"};Range.prototype.get=function(index,notSetValue){return this.has(index)?this._start+wrapIndex(this,index)*this._step:notSetValue};Range.prototype.includes=function(searchValue){var possibleIndex=(searchValue-this._start)/this._step;return possibleIndex>=0&&possibleIndex<this.size&&possibleIndex===Math.floor(possibleIndex)};Range.prototype.slice=function(begin,end){if(wholeSlice(begin,end,this.size)){return this}begin=resolveBegin(begin,this.size);end=resolveEnd(end,this.size);if(end<=begin){return new Range(0,0)}return new Range(this.get(begin,this._end),this.get(end,this._end),this._step)};Range.prototype.indexOf=function(searchValue){var offsetValue=searchValue-this._start;if(offsetValue%this._step===0){var index=offsetValue/this._step;if(index>=0&&index<this.size){return index}}return-1};Range.prototype.lastIndexOf=function(searchValue){return this.indexOf(searchValue)};Range.prototype.__iterate=function(fn,reverse){var maxIndex=this.size-1;var step=this._step;var value=reverse?this._start+maxIndex*step:this._start;for(var ii=0;ii<=maxIndex;ii++){if(fn(value,ii,this)===false){return ii+1}value+=reverse?-step:step}return ii};Range.prototype.__iterator=function(type,reverse){var maxIndex=this.size-1;var step=this._step;var value=reverse?this._start+maxIndex*step:this._start;var ii=0;return new Iterator(function(){var v=value;value+=reverse?-step:step;return ii>maxIndex?iteratorDone():iteratorValue(type,ii++,v)})};Range.prototype.equals=function(other){return other instanceof Range?this._start===other._start&&this._end===other._end&&this._step===other._step:deepEqual(this,other)};var EMPTY_RANGE;createClass(Collection,Iterable);function Collection(){throw TypeError("Abstract")}createClass(KeyedCollection,Collection);function KeyedCollection(){}createClass(IndexedCollection,Collection);function IndexedCollection(){}createClass(SetCollection,Collection);function SetCollection(){}Collection.Keyed=KeyedCollection;Collection.Indexed=IndexedCollection;Collection.Set=SetCollection;var imul=typeof Math.imul==="function"&&Math.imul(4294967295,2)===-2?Math.imul:function imul(a,b){a=a|0;b=b|0;var c=a&65535;var d=b&65535;return c*d+((a>>>16)*d+c*(b>>>16)<<16>>>0)|0};function smi(i32){return i32>>>1&1073741824|i32&3221225471}function hash(o){if(o===false||o===null||o===undefined){return 0}if(typeof o.valueOf==="function"){o=o.valueOf();if(o===false||o===null||o===undefined){return 0}}if(o===true){return 1}var type=typeof o;if(type==="number"){if(o!==o||o===Infinity){return 0}var h=o|0;if(h!==o){h^=o*4294967295}while(o>4294967295){o/=4294967295;h^=o}return smi(h)}if(type==="string"){return o.length>STRING_HASH_CACHE_MIN_STRLEN?cachedHashString(o):hashString(o)}if(typeof o.hashCode==="function"){return o.hashCode()}if(type==="object"){return hashJSObj(o)}if(typeof o.toString==="function"){return hashString(o.toString())}throw new Error("Value type "+type+" cannot be hashed.")}function cachedHashString(string){var hash=stringHashCache[string];if(hash===undefined){hash=hashString(string);if(STRING_HASH_CACHE_SIZE===STRING_HASH_CACHE_MAX_SIZE){STRING_HASH_CACHE_SIZE=0;stringHashCache={}}STRING_HASH_CACHE_SIZE++;stringHashCache[string]=hash}return hash}function hashString(string){var hash=0;for(var ii=0;ii<string.length;ii++){hash=31*hash+string.charCodeAt(ii)|0}return smi(hash)}function hashJSObj(obj){var hash;if(usingWeakMap){hash=weakMap.get(obj);if(hash!==undefined){return hash}}hash=obj[UID_HASH_KEY];if(hash!==undefined){return hash}if(!canDefineProperty){hash=obj.propertyIsEnumerable&&obj.propertyIsEnumerable[UID_HASH_KEY];if(hash!==undefined){return hash}hash=getIENodeHash(obj);if(hash!==undefined){return hash}}hash=++objHashUID;if(objHashUID&1073741824){objHashUID=0}if(usingWeakMap){weakMap.set(obj,hash)}else if(isExtensible!==undefined&&isExtensible(obj)===false){throw new Error("Non-extensible objects are not allowed as keys.")}else if(canDefineProperty){Object.defineProperty(obj,UID_HASH_KEY,{enumerable:false,configurable:false,writable:false,value:hash})}else if(obj.propertyIsEnumerable!==undefined&&obj.propertyIsEnumerable===obj.constructor.prototype.propertyIsEnumerable){obj.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)};obj.propertyIsEnumerable[UID_HASH_KEY]=hash}else if(obj.nodeType!==undefined){obj[UID_HASH_KEY]=hash}else{throw new Error("Unable to set a non-enumerable property on object.")}return hash}var isExtensible=Object.isExtensible;var canDefineProperty=function(){try{Object.defineProperty({},"@",{});return true}catch(e){return false}}();function getIENodeHash(node){if(node&&node.nodeType>0){switch(node.nodeType){case 1:return node.uniqueID;case 9:return node.documentElement&&node.documentElement.uniqueID}}}var usingWeakMap=typeof WeakMap==="function";var weakMap;if(usingWeakMap){weakMap=new WeakMap}var objHashUID=0;var UID_HASH_KEY="__immutablehash__";if(typeof Symbol==="function"){UID_HASH_KEY=Symbol(UID_HASH_KEY)}var STRING_HASH_CACHE_MIN_STRLEN=16;var STRING_HASH_CACHE_MAX_SIZE=255;var STRING_HASH_CACHE_SIZE=0;var stringHashCache={};function assertNotInfinite(size){invariant(size!==Infinity,"Cannot perform this action with an infinite size.")}createClass(Map,KeyedCollection);function Map(value){return value===null||value===undefined?emptyMap():isMap(value)&&!isOrdered(value)?value:emptyMap().withMutations(function(map){var iter=KeyedIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v,k){return map.set(k,v)})})}Map.of=function(){var keyValues=SLICE$0.call(arguments,0);return emptyMap().withMutations(function(map){for(var i=0;i<keyValues.length;i+=2){if(i+1>=keyValues.length){throw new Error("Missing value for key: "+keyValues[i])}map.set(keyValues[i],keyValues[i+1])}})};Map.prototype.toString=function(){return this.__toString("Map {","}")};Map.prototype.get=function(k,notSetValue){return this._root?this._root.get(0,undefined,k,notSetValue):notSetValue};Map.prototype.set=function(k,v){return updateMap(this,k,v)};Map.prototype.setIn=function(keyPath,v){return this.updateIn(keyPath,NOT_SET,function(){return v})};Map.prototype.remove=function(k){return updateMap(this,k,NOT_SET)};Map.prototype.deleteIn=function(keyPath){return this.updateIn(keyPath,function(){return NOT_SET})};Map.prototype.update=function(k,notSetValue,updater){return arguments.length===1?k(this):this.updateIn([k],notSetValue,updater)};Map.prototype.updateIn=function(keyPath,notSetValue,updater){if(!updater){updater=notSetValue;notSetValue=undefined}var updatedValue=updateInDeepMap(this,forceIterator(keyPath),notSetValue,updater);return updatedValue===NOT_SET?undefined:updatedValue};Map.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=0;this._root=null;this.__hash=undefined;this.__altered=true;return this}return emptyMap()};Map.prototype.merge=function(){return mergeIntoMapWith(this,undefined,arguments)};Map.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoMapWith(this,merger,iters)};Map.prototype.mergeIn=function(keyPath){var iters=SLICE$0.call(arguments,1);return this.updateIn(keyPath,emptyMap(),function(m){return typeof m.merge==="function"?m.merge.apply(m,iters):iters[iters.length-1]})};Map.prototype.mergeDeep=function(){return mergeIntoMapWith(this,deepMerger,arguments)};Map.prototype.mergeDeepWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoMapWith(this,deepMergerWith(merger),iters)};Map.prototype.mergeDeepIn=function(keyPath){var iters=SLICE$0.call(arguments,1);return this.updateIn(keyPath,emptyMap(),function(m){return typeof m.mergeDeep==="function"?m.mergeDeep.apply(m,iters):iters[iters.length-1]})};Map.prototype.sort=function(comparator){return OrderedMap(sortFactory(this,comparator))};Map.prototype.sortBy=function(mapper,comparator){return OrderedMap(sortFactory(this,comparator,mapper))};Map.prototype.withMutations=function(fn){var mutable=this.asMutable();fn(mutable);return mutable.wasAltered()?mutable.__ensureOwner(this.__ownerID):this};Map.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new OwnerID)};Map.prototype.asImmutable=function(){return this.__ensureOwner()};Map.prototype.wasAltered=function(){return this.__altered};Map.prototype.__iterator=function(type,reverse){return new MapIterator(this,type,reverse)};Map.prototype.__iterate=function(fn,reverse){var this$0=this;var iterations=0;this._root&&this._root.iterate(function(entry){iterations++;return fn(entry[1],entry[0],this$0)},reverse);return iterations};Map.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}if(!ownerID){this.__ownerID=ownerID;this.__altered=false;return this}return makeMap(this.size,this._root,ownerID,this.__hash)};function isMap(maybeMap){return!!(maybeMap&&maybeMap[IS_MAP_SENTINEL])}Map.isMap=isMap;var IS_MAP_SENTINEL="@@__IMMUTABLE_MAP__@@";var MapPrototype=Map.prototype;MapPrototype[IS_MAP_SENTINEL]=true;MapPrototype[DELETE]=MapPrototype.remove;MapPrototype.removeIn=MapPrototype.deleteIn;function ArrayMapNode(ownerID,entries){this.ownerID=ownerID;this.entries=entries}ArrayMapNode.prototype.get=function(shift,keyHash,key,notSetValue){var entries=this.entries;for(var ii=0,len=entries.length;ii<len;ii++){if(is(key,entries[ii][0])){return entries[ii][1]}}return notSetValue};ArrayMapNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){var removed=value===NOT_SET;var entries=this.entries;var idx=0;for(var len=entries.length;idx<len;idx++){if(is(key,entries[idx][0])){break}}var exists=idx<len;if(exists?entries[idx][1]===value:removed){return this}SetRef(didAlter);(removed||!exists)&&SetRef(didChangeSize);if(removed&&entries.length===1){return}if(!exists&&!removed&&entries.length>=MAX_ARRAY_MAP_SIZE){return createNodes(ownerID,entries,key,value)}var isEditable=ownerID&&ownerID===this.ownerID;var newEntries=isEditable?entries:arrCopy(entries);if(exists){if(removed){idx===len-1?newEntries.pop():newEntries[idx]=newEntries.pop()}else{newEntries[idx]=[key,value]}}else{newEntries.push([key,value])}if(isEditable){this.entries=newEntries;return this}return new ArrayMapNode(ownerID,newEntries)};function BitmapIndexedNode(ownerID,bitmap,nodes){this.ownerID=ownerID;this.bitmap=bitmap;this.nodes=nodes}BitmapIndexedNode.prototype.get=function(shift,keyHash,key,notSetValue){if(keyHash===undefined){keyHash=hash(key)}var bit=1<<((shift===0?keyHash:keyHash>>>shift)&MASK);var bitmap=this.bitmap;return(bitmap&bit)===0?notSetValue:this.nodes[popCount(bitmap&bit-1)].get(shift+SHIFT,keyHash,key,notSetValue)};BitmapIndexedNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(keyHash===undefined){keyHash=hash(key)}var keyHashFrag=(shift===0?keyHash:keyHash>>>shift)&MASK;var bit=1<<keyHashFrag;var bitmap=this.bitmap;var exists=(bitmap&bit)!==0;if(!exists&&value===NOT_SET){return this}var idx=popCount(bitmap&bit-1);var nodes=this.nodes;var node=exists?nodes[idx]:undefined;var newNode=updateNode(node,ownerID,shift+SHIFT,keyHash,key,value,didChangeSize,didAlter);if(newNode===node){return this}if(!exists&&newNode&&nodes.length>=MAX_BITMAP_INDEXED_SIZE){return expandNodes(ownerID,nodes,bitmap,keyHashFrag,newNode)}if(exists&&!newNode&&nodes.length===2&&isLeafNode(nodes[idx^1])){return nodes[idx^1]}if(exists&&newNode&&nodes.length===1&&isLeafNode(newNode)){return newNode}var isEditable=ownerID&&ownerID===this.ownerID;var newBitmap=exists?newNode?bitmap:bitmap^bit:bitmap|bit;var newNodes=exists?newNode?setIn(nodes,idx,newNode,isEditable):spliceOut(nodes,idx,isEditable):spliceIn(nodes,idx,newNode,isEditable);if(isEditable){this.bitmap=newBitmap;this.nodes=newNodes;return this}return new BitmapIndexedNode(ownerID,newBitmap,newNodes)};function HashArrayMapNode(ownerID,count,nodes){this.ownerID=ownerID;this.count=count;this.nodes=nodes}HashArrayMapNode.prototype.get=function(shift,keyHash,key,notSetValue){if(keyHash===undefined){keyHash=hash(key)}var idx=(shift===0?keyHash:keyHash>>>shift)&MASK;var node=this.nodes[idx];return node?node.get(shift+SHIFT,keyHash,key,notSetValue):notSetValue};HashArrayMapNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(keyHash===undefined){keyHash=hash(key)}var idx=(shift===0?keyHash:keyHash>>>shift)&MASK;var removed=value===NOT_SET;var nodes=this.nodes;var node=nodes[idx];if(removed&&!node){return this}var newNode=updateNode(node,ownerID,shift+SHIFT,keyHash,key,value,didChangeSize,didAlter);if(newNode===node){return this}var newCount=this.count;if(!node){newCount++}else if(!newNode){newCount--;if(newCount<MIN_HASH_ARRAY_MAP_SIZE){return packNodes(ownerID,nodes,newCount,idx)}}var isEditable=ownerID&&ownerID===this.ownerID;var newNodes=setIn(nodes,idx,newNode,isEditable);if(isEditable){this.count=newCount;this.nodes=newNodes;return this}return new HashArrayMapNode(ownerID,newCount,newNodes)};function HashCollisionNode(ownerID,keyHash,entries){this.ownerID=ownerID;this.keyHash=keyHash;this.entries=entries}HashCollisionNode.prototype.get=function(shift,keyHash,key,notSetValue){var entries=this.entries;for(var ii=0,len=entries.length;ii<len;ii++){if(is(key,entries[ii][0])){return entries[ii][1]}}return notSetValue};HashCollisionNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(keyHash===undefined){keyHash=hash(key)}var removed=value===NOT_SET;if(keyHash!==this.keyHash){if(removed){return this}SetRef(didAlter);SetRef(didChangeSize);return mergeIntoNode(this,ownerID,shift,keyHash,[key,value])}var entries=this.entries;var idx=0;for(var len=entries.length;idx<len;idx++){if(is(key,entries[idx][0])){break}}var exists=idx<len;if(exists?entries[idx][1]===value:removed){return this}SetRef(didAlter);(removed||!exists)&&SetRef(didChangeSize);if(removed&&len===2){return new ValueNode(ownerID,this.keyHash,entries[idx^1])}var isEditable=ownerID&&ownerID===this.ownerID;var newEntries=isEditable?entries:arrCopy(entries);if(exists){if(removed){idx===len-1?newEntries.pop():newEntries[idx]=newEntries.pop()}else{newEntries[idx]=[key,value]}}else{newEntries.push([key,value])}if(isEditable){this.entries=newEntries;return this}return new HashCollisionNode(ownerID,this.keyHash,newEntries)};function ValueNode(ownerID,keyHash,entry){this.ownerID=ownerID;this.keyHash=keyHash;this.entry=entry}ValueNode.prototype.get=function(shift,keyHash,key,notSetValue){return is(key,this.entry[0])?this.entry[1]:notSetValue};ValueNode.prototype.update=function(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){var removed=value===NOT_SET;var keyMatch=is(key,this.entry[0]);if(keyMatch?value===this.entry[1]:removed){return this}SetRef(didAlter);if(removed){SetRef(didChangeSize);return}if(keyMatch){if(ownerID&&ownerID===this.ownerID){this.entry[1]=value;return this}return new ValueNode(ownerID,this.keyHash,[key,value])}SetRef(didChangeSize);return mergeIntoNode(this,ownerID,shift,hash(key),[key,value])};ArrayMapNode.prototype.iterate=HashCollisionNode.prototype.iterate=function(fn,reverse){var entries=this.entries;for(var ii=0,maxIndex=entries.length-1;ii<=maxIndex;ii++){if(fn(entries[reverse?maxIndex-ii:ii])===false){return false}}};BitmapIndexedNode.prototype.iterate=HashArrayMapNode.prototype.iterate=function(fn,reverse){var nodes=this.nodes;for(var ii=0,maxIndex=nodes.length-1;ii<=maxIndex;ii++){var node=nodes[reverse?maxIndex-ii:ii]
;if(node&&node.iterate(fn,reverse)===false){return false}}};ValueNode.prototype.iterate=function(fn,reverse){return fn(this.entry)};createClass(MapIterator,Iterator);function MapIterator(map,type,reverse){this._type=type;this._reverse=reverse;this._stack=map._root&&mapIteratorFrame(map._root)}MapIterator.prototype.next=function(){var type=this._type;var stack=this._stack;while(stack){var node=stack.node;var index=stack.index++;var maxIndex;if(node.entry){if(index===0){return mapIteratorValue(type,node.entry)}}else if(node.entries){maxIndex=node.entries.length-1;if(index<=maxIndex){return mapIteratorValue(type,node.entries[this._reverse?maxIndex-index:index])}}else{maxIndex=node.nodes.length-1;if(index<=maxIndex){var subNode=node.nodes[this._reverse?maxIndex-index:index];if(subNode){if(subNode.entry){return mapIteratorValue(type,subNode.entry)}stack=this._stack=mapIteratorFrame(subNode,stack)}continue}}stack=this._stack=this._stack.__prev}return iteratorDone()};function mapIteratorValue(type,entry){return iteratorValue(type,entry[0],entry[1])}function mapIteratorFrame(node,prev){return{node:node,index:0,__prev:prev}}function makeMap(size,root,ownerID,hash){var map=Object.create(MapPrototype);map.size=size;map._root=root;map.__ownerID=ownerID;map.__hash=hash;map.__altered=false;return map}var EMPTY_MAP;function emptyMap(){return EMPTY_MAP||(EMPTY_MAP=makeMap(0))}function updateMap(map,k,v){var newRoot;var newSize;if(!map._root){if(v===NOT_SET){return map}newSize=1;newRoot=new ArrayMapNode(map.__ownerID,[[k,v]])}else{var didChangeSize=MakeRef(CHANGE_LENGTH);var didAlter=MakeRef(DID_ALTER);newRoot=updateNode(map._root,map.__ownerID,0,undefined,k,v,didChangeSize,didAlter);if(!didAlter.value){return map}newSize=map.size+(didChangeSize.value?v===NOT_SET?-1:1:0)}if(map.__ownerID){map.size=newSize;map._root=newRoot;map.__hash=undefined;map.__altered=true;return map}return newRoot?makeMap(newSize,newRoot):emptyMap()}function updateNode(node,ownerID,shift,keyHash,key,value,didChangeSize,didAlter){if(!node){if(value===NOT_SET){return node}SetRef(didAlter);SetRef(didChangeSize);return new ValueNode(ownerID,keyHash,[key,value])}return node.update(ownerID,shift,keyHash,key,value,didChangeSize,didAlter)}function isLeafNode(node){return node.constructor===ValueNode||node.constructor===HashCollisionNode}function mergeIntoNode(node,ownerID,shift,keyHash,entry){if(node.keyHash===keyHash){return new HashCollisionNode(ownerID,keyHash,[node.entry,entry])}var idx1=(shift===0?node.keyHash:node.keyHash>>>shift)&MASK;var idx2=(shift===0?keyHash:keyHash>>>shift)&MASK;var newNode;var nodes=idx1===idx2?[mergeIntoNode(node,ownerID,shift+SHIFT,keyHash,entry)]:(newNode=new ValueNode(ownerID,keyHash,entry),idx1<idx2?[node,newNode]:[newNode,node]);return new BitmapIndexedNode(ownerID,1<<idx1|1<<idx2,nodes)}function createNodes(ownerID,entries,key,value){if(!ownerID){ownerID=new OwnerID}var node=new ValueNode(ownerID,hash(key),[key,value]);for(var ii=0;ii<entries.length;ii++){var entry=entries[ii];node=node.update(ownerID,0,undefined,entry[0],entry[1])}return node}function packNodes(ownerID,nodes,count,excluding){var bitmap=0;var packedII=0;var packedNodes=new Array(count);for(var ii=0,bit=1,len=nodes.length;ii<len;ii++,bit<<=1){var node=nodes[ii];if(node!==undefined&&ii!==excluding){bitmap|=bit;packedNodes[packedII++]=node}}return new BitmapIndexedNode(ownerID,bitmap,packedNodes)}function expandNodes(ownerID,nodes,bitmap,including,node){var count=0;var expandedNodes=new Array(SIZE);for(var ii=0;bitmap!==0;ii++,bitmap>>>=1){expandedNodes[ii]=bitmap&1?nodes[count++]:undefined}expandedNodes[including]=node;return new HashArrayMapNode(ownerID,count+1,expandedNodes)}function mergeIntoMapWith(map,merger,iterables){var iters=[];for(var ii=0;ii<iterables.length;ii++){var value=iterables[ii];var iter=KeyedIterable(value);if(!isIterable(value)){iter=iter.map(function(v){return fromJS(v)})}iters.push(iter)}return mergeIntoCollectionWith(map,merger,iters)}function deepMerger(existing,value,key){return existing&&existing.mergeDeep&&isIterable(value)?existing.mergeDeep(value):is(existing,value)?existing:value}function deepMergerWith(merger){return function(existing,value,key){if(existing&&existing.mergeDeepWith&&isIterable(value)){return existing.mergeDeepWith(merger,value)}var nextValue=merger(existing,value,key);return is(existing,nextValue)?existing:nextValue}}function mergeIntoCollectionWith(collection,merger,iters){iters=iters.filter(function(x){return x.size!==0});if(iters.length===0){return collection}if(collection.size===0&&!collection.__ownerID&&iters.length===1){return collection.constructor(iters[0])}return collection.withMutations(function(collection){var mergeIntoMap=merger?function(value,key){collection.update(key,NOT_SET,function(existing){return existing===NOT_SET?value:merger(existing,value,key)})}:function(value,key){collection.set(key,value)};for(var ii=0;ii<iters.length;ii++){iters[ii].forEach(mergeIntoMap)}})}function updateInDeepMap(existing,keyPathIter,notSetValue,updater){var isNotSet=existing===NOT_SET;var step=keyPathIter.next();if(step.done){var existingValue=isNotSet?notSetValue:existing;var newValue=updater(existingValue);return newValue===existingValue?existing:newValue}invariant(isNotSet||existing&&existing.set,"invalid keyPath");var key=step.value;var nextExisting=isNotSet?NOT_SET:existing.get(key,NOT_SET);var nextUpdated=updateInDeepMap(nextExisting,keyPathIter,notSetValue,updater);return nextUpdated===nextExisting?existing:nextUpdated===NOT_SET?existing.remove(key):(isNotSet?emptyMap():existing).set(key,nextUpdated)}function popCount(x){x=x-(x>>1&1431655765);x=(x&858993459)+(x>>2&858993459);x=x+(x>>4)&252645135;x=x+(x>>8);x=x+(x>>16);return x&127}function setIn(array,idx,val,canEdit){var newArray=canEdit?array:arrCopy(array);newArray[idx]=val;return newArray}function spliceIn(array,idx,val,canEdit){var newLen=array.length+1;if(canEdit&&idx+1===newLen){array[idx]=val;return array}var newArray=new Array(newLen);var after=0;for(var ii=0;ii<newLen;ii++){if(ii===idx){newArray[ii]=val;after=-1}else{newArray[ii]=array[ii+after]}}return newArray}function spliceOut(array,idx,canEdit){var newLen=array.length-1;if(canEdit&&idx===newLen){array.pop();return array}var newArray=new Array(newLen);var after=0;for(var ii=0;ii<newLen;ii++){if(ii===idx){after=1}newArray[ii]=array[ii+after]}return newArray}var MAX_ARRAY_MAP_SIZE=SIZE/4;var MAX_BITMAP_INDEXED_SIZE=SIZE/2;var MIN_HASH_ARRAY_MAP_SIZE=SIZE/4;createClass(List,IndexedCollection);function List(value){var empty=emptyList();if(value===null||value===undefined){return empty}if(isList(value)){return value}var iter=IndexedIterable(value);var size=iter.size;if(size===0){return empty}assertNotInfinite(size);if(size>0&&size<SIZE){return makeList(0,size,SHIFT,null,new VNode(iter.toArray()))}return empty.withMutations(function(list){list.setSize(size);iter.forEach(function(v,i){return list.set(i,v)})})}List.of=function(){return this(arguments)};List.prototype.toString=function(){return this.__toString("List [","]")};List.prototype.get=function(index,notSetValue){index=wrapIndex(this,index);if(index>=0&&index<this.size){index+=this._origin;var node=listNodeFor(this,index);return node&&node.array[index&MASK]}return notSetValue};List.prototype.set=function(index,value){return updateList(this,index,value)};List.prototype.remove=function(index){return!this.has(index)?this:index===0?this.shift():index===this.size-1?this.pop():this.splice(index,1)};List.prototype.insert=function(index,value){return this.splice(index,0,value)};List.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=this._origin=this._capacity=0;this._level=SHIFT;this._root=this._tail=null;this.__hash=undefined;this.__altered=true;return this}return emptyList()};List.prototype.push=function(){var values=arguments;var oldSize=this.size;return this.withMutations(function(list){setListBounds(list,0,oldSize+values.length);for(var ii=0;ii<values.length;ii++){list.set(oldSize+ii,values[ii])}})};List.prototype.pop=function(){return setListBounds(this,0,-1)};List.prototype.unshift=function(){var values=arguments;return this.withMutations(function(list){setListBounds(list,-values.length);for(var ii=0;ii<values.length;ii++){list.set(ii,values[ii])}})};List.prototype.shift=function(){return setListBounds(this,1)};List.prototype.merge=function(){return mergeIntoListWith(this,undefined,arguments)};List.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoListWith(this,merger,iters)};List.prototype.mergeDeep=function(){return mergeIntoListWith(this,deepMerger,arguments)};List.prototype.mergeDeepWith=function(merger){var iters=SLICE$0.call(arguments,1);return mergeIntoListWith(this,deepMergerWith(merger),iters)};List.prototype.setSize=function(size){return setListBounds(this,0,size)};List.prototype.slice=function(begin,end){var size=this.size;if(wholeSlice(begin,end,size)){return this}return setListBounds(this,resolveBegin(begin,size),resolveEnd(end,size))};List.prototype.__iterator=function(type,reverse){var index=0;var values=iterateList(this,reverse);return new Iterator(function(){var value=values();return value===DONE?iteratorDone():iteratorValue(type,index++,value)})};List.prototype.__iterate=function(fn,reverse){var index=0;var values=iterateList(this,reverse);var value;while((value=values())!==DONE){if(fn(value,index++,this)===false){break}}return index};List.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}if(!ownerID){this.__ownerID=ownerID;return this}return makeList(this._origin,this._capacity,this._level,this._root,this._tail,ownerID,this.__hash)};function isList(maybeList){return!!(maybeList&&maybeList[IS_LIST_SENTINEL])}List.isList=isList;var IS_LIST_SENTINEL="@@__IMMUTABLE_LIST__@@";var ListPrototype=List.prototype;ListPrototype[IS_LIST_SENTINEL]=true;ListPrototype[DELETE]=ListPrototype.remove;ListPrototype.setIn=MapPrototype.setIn;ListPrototype.deleteIn=ListPrototype.removeIn=MapPrototype.removeIn;ListPrototype.update=MapPrototype.update;ListPrototype.updateIn=MapPrototype.updateIn;ListPrototype.mergeIn=MapPrototype.mergeIn;ListPrototype.mergeDeepIn=MapPrototype.mergeDeepIn;ListPrototype.withMutations=MapPrototype.withMutations;ListPrototype.asMutable=MapPrototype.asMutable;ListPrototype.asImmutable=MapPrototype.asImmutable;ListPrototype.wasAltered=MapPrototype.wasAltered;function VNode(array,ownerID){this.array=array;this.ownerID=ownerID}VNode.prototype.removeBefore=function(ownerID,level,index){if(index===level?1<<level:0||this.array.length===0){return this}var originIndex=index>>>level&MASK;if(originIndex>=this.array.length){return new VNode([],ownerID)}var removingFirst=originIndex===0;var newChild;if(level>0){var oldChild=this.array[originIndex];newChild=oldChild&&oldChild.removeBefore(ownerID,level-SHIFT,index);if(newChild===oldChild&&removingFirst){return this}}if(removingFirst&&!newChild){return this}var editable=editableVNode(this,ownerID);if(!removingFirst){for(var ii=0;ii<originIndex;ii++){editable.array[ii]=undefined}}if(newChild){editable.array[originIndex]=newChild}return editable};VNode.prototype.removeAfter=function(ownerID,level,index){if(index===(level?1<<level:0)||this.array.length===0){return this}var sizeIndex=index-1>>>level&MASK;if(sizeIndex>=this.array.length){return this}var newChild;if(level>0){var oldChild=this.array[sizeIndex];newChild=oldChild&&oldChild.removeAfter(ownerID,level-SHIFT,index);if(newChild===oldChild&&sizeIndex===this.array.length-1){return this}}var editable=editableVNode(this,ownerID);editable.array.splice(sizeIndex+1);if(newChild){editable.array[sizeIndex]=newChild}return editable};var DONE={};function iterateList(list,reverse){var left=list._origin;var right=list._capacity;var tailPos=getTailOffset(right);var tail=list._tail;return iterateNodeOrLeaf(list._root,list._level,0);function iterateNodeOrLeaf(node,level,offset){return level===0?iterateLeaf(node,offset):iterateNode(node,level,offset)}function iterateLeaf(node,offset){var array=offset===tailPos?tail&&tail.array:node&&node.array;var from=offset>left?0:left-offset;var to=right-offset;if(to>SIZE){to=SIZE}return function(){if(from===to){return DONE}var idx=reverse?--to:from++;return array&&array[idx]}}function iterateNode(node,level,offset){var values;var array=node&&node.array;var from=offset>left?0:left-offset>>level;var to=(right-offset>>level)+1;if(to>SIZE){to=SIZE}return function(){do{if(values){var value=values();if(value!==DONE){return value}values=null}if(from===to){return DONE}var idx=reverse?--to:from++;values=iterateNodeOrLeaf(array&&array[idx],level-SHIFT,offset+(idx<<level))}while(true)}}}function makeList(origin,capacity,level,root,tail,ownerID,hash){var list=Object.create(ListPrototype);list.size=capacity-origin;list._origin=origin;list._capacity=capacity;list._level=level;list._root=root;list._tail=tail;list.__ownerID=ownerID;list.__hash=hash;list.__altered=false;return list}var EMPTY_LIST;function emptyList(){return EMPTY_LIST||(EMPTY_LIST=makeList(0,0,SHIFT))}function updateList(list,index,value){index=wrapIndex(list,index);if(index!==index){return list}if(index>=list.size||index<0){return list.withMutations(function(list){index<0?setListBounds(list,index).set(0,value):setListBounds(list,0,index+1).set(index,value)})}index+=list._origin;var newTail=list._tail;var newRoot=list._root;var didAlter=MakeRef(DID_ALTER);if(index>=getTailOffset(list._capacity)){newTail=updateVNode(newTail,list.__ownerID,0,index,value,didAlter)}else{newRoot=updateVNode(newRoot,list.__ownerID,list._level,index,value,didAlter)}if(!didAlter.value){return list}if(list.__ownerID){list._root=newRoot;list._tail=newTail;list.__hash=undefined;list.__altered=true;return list}return makeList(list._origin,list._capacity,list._level,newRoot,newTail)}function updateVNode(node,ownerID,level,index,value,didAlter){var idx=index>>>level&MASK;var nodeHas=node&&idx<node.array.length;if(!nodeHas&&value===undefined){return node}var newNode;if(level>0){var lowerNode=node&&node.array[idx];var newLowerNode=updateVNode(lowerNode,ownerID,level-SHIFT,index,value,didAlter);if(newLowerNode===lowerNode){return node}newNode=editableVNode(node,ownerID);newNode.array[idx]=newLowerNode;return newNode}if(nodeHas&&node.array[idx]===value){return node}SetRef(didAlter);newNode=editableVNode(node,ownerID);if(value===undefined&&idx===newNode.array.length-1){newNode.array.pop()}else{newNode.array[idx]=value}return newNode}function editableVNode(node,ownerID){if(ownerID&&node&&ownerID===node.ownerID){return node}return new VNode(node?node.array.slice():[],ownerID)}function listNodeFor(list,rawIndex){if(rawIndex>=getTailOffset(list._capacity)){return list._tail}if(rawIndex<1<<list._level+SHIFT){var node=list._root;var level=list._level;while(node&&level>0){node=node.array[rawIndex>>>level&MASK];level-=SHIFT}return node}}function setListBounds(list,begin,end){if(begin!==undefined){begin=begin|0}if(end!==undefined){end=end|0}var owner=list.__ownerID||new OwnerID;var oldOrigin=list._origin;var oldCapacity=list._capacity;var newOrigin=oldOrigin+begin;var newCapacity=end===undefined?oldCapacity:end<0?oldCapacity+end:oldOrigin+end;if(newOrigin===oldOrigin&&newCapacity===oldCapacity){return list}if(newOrigin>=newCapacity){return list.clear()}var newLevel=list._level;var newRoot=list._root;var offsetShift=0;while(newOrigin+offsetShift<0){newRoot=new VNode(newRoot&&newRoot.array.length?[undefined,newRoot]:[],owner);newLevel+=SHIFT;offsetShift+=1<<newLevel}if(offsetShift){newOrigin+=offsetShift;oldOrigin+=offsetShift;newCapacity+=offsetShift;oldCapacity+=offsetShift}var oldTailOffset=getTailOffset(oldCapacity);var newTailOffset=getTailOffset(newCapacity);while(newTailOffset>=1<<newLevel+SHIFT){newRoot=new VNode(newRoot&&newRoot.array.length?[newRoot]:[],owner);newLevel+=SHIFT}var oldTail=list._tail;var newTail=newTailOffset<oldTailOffset?listNodeFor(list,newCapacity-1):newTailOffset>oldTailOffset?new VNode([],owner):oldTail;if(oldTail&&newTailOffset>oldTailOffset&&newOrigin<oldCapacity&&oldTail.array.length){newRoot=editableVNode(newRoot,owner);var node=newRoot;for(var level=newLevel;level>SHIFT;level-=SHIFT){var idx=oldTailOffset>>>level&MASK;node=node.array[idx]=editableVNode(node.array[idx],owner)}node.array[oldTailOffset>>>SHIFT&MASK]=oldTail}if(newCapacity<oldCapacity){newTail=newTail&&newTail.removeAfter(owner,0,newCapacity)}if(newOrigin>=newTailOffset){newOrigin-=newTailOffset;newCapacity-=newTailOffset;newLevel=SHIFT;newRoot=null;newTail=newTail&&newTail.removeBefore(owner,0,newOrigin)}else if(newOrigin>oldOrigin||newTailOffset<oldTailOffset){offsetShift=0;while(newRoot){var beginIndex=newOrigin>>>newLevel&MASK;if(beginIndex!==newTailOffset>>>newLevel&MASK){break}if(beginIndex){offsetShift+=(1<<newLevel)*beginIndex}newLevel-=SHIFT;newRoot=newRoot.array[beginIndex]}if(newRoot&&newOrigin>oldOrigin){newRoot=newRoot.removeBefore(owner,newLevel,newOrigin-offsetShift)}if(newRoot&&newTailOffset<oldTailOffset){newRoot=newRoot.removeAfter(owner,newLevel,newTailOffset-offsetShift)}if(offsetShift){newOrigin-=offsetShift;newCapacity-=offsetShift}}if(list.__ownerID){list.size=newCapacity-newOrigin;list._origin=newOrigin;list._capacity=newCapacity;list._level=newLevel;list._root=newRoot;list._tail=newTail;list.__hash=undefined;list.__altered=true;return list}return makeList(newOrigin,newCapacity,newLevel,newRoot,newTail)}function mergeIntoListWith(list,merger,iterables){var iters=[];var maxSize=0;for(var ii=0;ii<iterables.length;ii++){var value=iterables[ii];var iter=IndexedIterable(value);if(iter.size>maxSize){maxSize=iter.size}if(!isIterable(value)){iter=iter.map(function(v){return fromJS(v)})}iters.push(iter)}if(maxSize>list.size){list=list.setSize(maxSize)}return mergeIntoCollectionWith(list,merger,iters)}function getTailOffset(size){return size<SIZE?0:size-1>>>SHIFT<<SHIFT}createClass(OrderedMap,Map);function OrderedMap(value){return value===null||value===undefined?emptyOrderedMap():isOrderedMap(value)?value:emptyOrderedMap().withMutations(function(map){var iter=KeyedIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v,k){return map.set(k,v)})})}OrderedMap.of=function(){return this(arguments)};OrderedMap.prototype.toString=function(){return this.__toString("OrderedMap {","}")};OrderedMap.prototype.get=function(k,notSetValue){var index=this._map.get(k);return index!==undefined?this._list.get(index)[1]:notSetValue};OrderedMap.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=0;this._map.clear();this._list.clear();return this}return emptyOrderedMap()};OrderedMap.prototype.set=function(k,v){return updateOrderedMap(this,k,v)};OrderedMap.prototype.remove=function(k){return updateOrderedMap(this,k,NOT_SET)};OrderedMap.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()};OrderedMap.prototype.__iterate=function(fn,reverse){var this$0=this;return this._list.__iterate(function(entry){return entry&&fn(entry[1],entry[0],this$0)},reverse)};OrderedMap.prototype.__iterator=function(type,reverse){return this._list.fromEntrySeq().__iterator(type,reverse)};OrderedMap.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}var newMap=this._map.__ensureOwner(ownerID);var newList=this._list.__ensureOwner(ownerID);if(!ownerID){this.__ownerID=ownerID;this._map=newMap;this._list=newList;return this}return makeOrderedMap(newMap,newList,ownerID,this.__hash)};function isOrderedMap(maybeOrderedMap){return isMap(maybeOrderedMap)&&isOrdered(maybeOrderedMap)}OrderedMap.isOrderedMap=isOrderedMap;OrderedMap.prototype[IS_ORDERED_SENTINEL]=true;OrderedMap.prototype[DELETE]=OrderedMap.prototype.remove;function makeOrderedMap(map,list,ownerID,hash){var omap=Object.create(OrderedMap.prototype);omap.size=map?map.size:0;omap._map=map;omap._list=list;omap.__ownerID=ownerID;omap.__hash=hash;return omap}var EMPTY_ORDERED_MAP;function emptyOrderedMap(){return EMPTY_ORDERED_MAP||(EMPTY_ORDERED_MAP=makeOrderedMap(emptyMap(),emptyList()))}function updateOrderedMap(omap,k,v){var map=omap._map;var list=omap._list;var i=map.get(k);var has=i!==undefined;var newMap;var newList;if(v===NOT_SET){if(!has){return omap}if(list.size>=SIZE&&list.size>=map.size*2){newList=list.filter(function(entry,idx){return entry!==undefined&&i!==idx});newMap=newList.toKeyedSeq().map(function(entry){return entry[0]}).flip().toMap();if(omap.__ownerID){newMap.__ownerID=newList.__ownerID=omap.__ownerID}}else{newMap=map.remove(k);newList=i===list.size-1?list.pop():list.set(i,undefined)}}else{if(has){if(v===list.get(i)[1]){return omap}newMap=map;newList=list.set(i,[k,v])}else{newMap=map.set(k,list.size);newList=list.set(list.size,[k,v])}}if(omap.__ownerID){omap.size=newMap.size;omap._map=newMap;omap._list=newList;omap.__hash=undefined;return omap}return makeOrderedMap(newMap,newList)}createClass(ToKeyedSequence,KeyedSeq);function ToKeyedSequence(indexed,useKeys){this._iter=indexed;this._useKeys=useKeys;this.size=indexed.size}ToKeyedSequence.prototype.get=function(key,notSetValue){return this._iter.get(key,notSetValue)};ToKeyedSequence.prototype.has=function(key){return this._iter.has(key)};ToKeyedSequence.prototype.valueSeq=function(){return this._iter.valueSeq()};ToKeyedSequence.prototype.reverse=function(){var this$0=this;var reversedSequence=reverseFactory(this,true);if(!this._useKeys){reversedSequence.valueSeq=function(){return this$0._iter.toSeq().reverse()}}return reversedSequence};ToKeyedSequence.prototype.map=function(mapper,context){var this$0=this;var mappedSequence=mapFactory(this,mapper,context);if(!this._useKeys){mappedSequence.valueSeq=function(){return this$0._iter.toSeq().map(mapper,context)}}return mappedSequence};ToKeyedSequence.prototype.__iterate=function(fn,reverse){var this$0=this;var ii;return this._iter.__iterate(this._useKeys?function(v,k){return fn(v,k,this$0)}:(ii=reverse?resolveSize(this):0,function(v){return fn(v,reverse?--ii:ii++,this$0)}),reverse)};ToKeyedSequence.prototype.__iterator=function(type,reverse){if(this._useKeys){return this._iter.__iterator(type,reverse)}var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);var ii=reverse?resolveSize(this):0;return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,reverse?--ii:ii++,step.value,step)})};ToKeyedSequence.prototype[IS_ORDERED_SENTINEL]=true;createClass(ToIndexedSequence,IndexedSeq);function ToIndexedSequence(iter){this._iter=iter;this.size=iter.size}ToIndexedSequence.prototype.includes=function(value){return this._iter.includes(value)};ToIndexedSequence.prototype.__iterate=function(fn,reverse){var this$0=this;var iterations=0;return this._iter.__iterate(function(v){return fn(v,iterations++,this$0)},reverse)};ToIndexedSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);var iterations=0;return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,iterations++,step.value,step)})};createClass(ToSetSequence,SetSeq);function ToSetSequence(iter){this._iter=iter;this.size=iter.size}ToSetSequence.prototype.has=function(key){return this._iter.includes(key)};ToSetSequence.prototype.__iterate=function(fn,reverse){var this$0=this;return this._iter.__iterate(function(v){return fn(v,v,this$0)},reverse)};ToSetSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);return new Iterator(function(){var step=iterator.next();return step.done?step:iteratorValue(type,step.value,step.value,step)})};createClass(FromEntriesSequence,KeyedSeq);function FromEntriesSequence(entries){this._iter=entries;this.size=entries.size}FromEntriesSequence.prototype.entrySeq=function(){return this._iter.toSeq()};FromEntriesSequence.prototype.__iterate=function(fn,reverse){var this$0=this;return this._iter.__iterate(function(entry){if(entry){validateEntry(entry);var indexedIterable=isIterable(entry);return fn(indexedIterable?entry.get(1):entry[1],indexedIterable?entry.get(0):entry[0],this$0)}},reverse)};FromEntriesSequence.prototype.__iterator=function(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);return new Iterator(function(){while(true){var step=iterator.next();if(step.done){return step}var entry=step.value;if(entry){validateEntry(entry);var indexedIterable=isIterable(entry);return iteratorValue(type,indexedIterable?entry.get(0):entry[0],indexedIterable?entry.get(1):entry[1],step)}}})};ToIndexedSequence.prototype.cacheResult=ToKeyedSequence.prototype.cacheResult=ToSetSequence.prototype.cacheResult=FromEntriesSequence.prototype.cacheResult=cacheResultThrough;function flipFactory(iterable){var flipSequence=makeSequence(iterable);flipSequence._iter=iterable;flipSequence.size=iterable.size;flipSequence.flip=function(){return iterable};flipSequence.reverse=function(){var reversedSequence=iterable.reverse.apply(this);reversedSequence.flip=function(){return iterable.reverse()};return reversedSequence};flipSequence.has=function(key){return iterable.includes(key)};flipSequence.includes=function(key){return iterable.has(key)};flipSequence.cacheResult=cacheResultThrough;flipSequence.__iterateUncached=function(fn,reverse){var this$0=this;return iterable.__iterate(function(v,k){return fn(k,v,this$0)!==false},reverse)};flipSequence.__iteratorUncached=function(type,reverse){if(type===ITERATE_ENTRIES){var iterator=iterable.__iterator(type,reverse);return new Iterator(function(){var step=iterator.next();if(!step.done){var k=step.value[0];step.value[0]=step.value[1];step.value[1]=k}return step})}return iterable.__iterator(type===ITERATE_VALUES?ITERATE_KEYS:ITERATE_VALUES,reverse)};return flipSequence}function mapFactory(iterable,mapper,context){var mappedSequence=makeSequence(iterable);mappedSequence.size=iterable.size;mappedSequence.has=function(key){return iterable.has(key)};mappedSequence.get=function(key,notSetValue){var v=iterable.get(key,NOT_SET);return v===NOT_SET?notSetValue:mapper.call(context,v,key,iterable)};mappedSequence.__iterateUncached=function(fn,reverse){var this$0=this;return iterable.__iterate(function(v,k,c){return fn(mapper.call(context,v,k,c),k,this$0)!==false},reverse)};mappedSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);return new Iterator(function(){var step=iterator.next();if(step.done){return step}var entry=step.value;var key=entry[0];return iteratorValue(type,key,mapper.call(context,entry[1],key,iterable),step)})};return mappedSequence}function reverseFactory(iterable,useKeys){var reversedSequence=makeSequence(iterable);reversedSequence._iter=iterable;reversedSequence.size=iterable.size;reversedSequence.reverse=function(){return iterable};if(iterable.flip){reversedSequence.flip=function(){var flipSequence=flipFactory(iterable);flipSequence.reverse=function(){return iterable.flip()};return flipSequence}}reversedSequence.get=function(key,notSetValue){return iterable.get(useKeys?key:-1-key,notSetValue)};reversedSequence.has=function(key){return iterable.has(useKeys?key:-1-key)};reversedSequence.includes=function(value){return iterable.includes(value)};reversedSequence.cacheResult=cacheResultThrough;reversedSequence.__iterate=function(fn,reverse){var this$0=this;return iterable.__iterate(function(v,k){return fn(v,k,this$0)},!reverse)};reversedSequence.__iterator=function(type,reverse){return iterable.__iterator(type,!reverse)};return reversedSequence}function filterFactory(iterable,predicate,context,useKeys){var filterSequence=makeSequence(iterable);if(useKeys){filterSequence.has=function(key){var v=iterable.get(key,NOT_SET);return v!==NOT_SET&&!!predicate.call(context,v,key,iterable)};filterSequence.get=function(key,notSetValue){var v=iterable.get(key,NOT_SET);return v!==NOT_SET&&predicate.call(context,v,key,iterable)?v:notSetValue}}filterSequence.__iterateUncached=function(fn,reverse){var this$0=this;var iterations=0;iterable.__iterate(function(v,k,c){if(predicate.call(context,v,k,c)){iterations++;return fn(v,useKeys?k:iterations-1,this$0)}},reverse);return iterations};filterSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);var iterations=0;return new Iterator(function(){while(true){var step=iterator.next();if(step.done){return step}var entry=step.value;var key=entry[0];var value=entry[1];if(predicate.call(context,value,key,iterable)){return iteratorValue(type,useKeys?key:iterations++,value,step)}}})};return filterSequence}function countByFactory(iterable,grouper,context){var groups=Map().asMutable();iterable.__iterate(function(v,k){groups.update(grouper.call(context,v,k,iterable),0,function(a){return a+1})});return groups.asImmutable()}function groupByFactory(iterable,grouper,context){var isKeyedIter=isKeyed(iterable);var groups=(isOrdered(iterable)?OrderedMap():Map()).asMutable();iterable.__iterate(function(v,k){groups.update(grouper.call(context,v,k,iterable),function(a){return a=a||[],a.push(isKeyedIter?[k,v]:v),a})});var coerce=iterableClass(iterable);return groups.map(function(arr){return reify(iterable,coerce(arr))})}function sliceFactory(iterable,begin,end,useKeys){var originalSize=iterable.size;if(begin!==undefined){begin=begin|0}if(end!==undefined){if(end===Infinity){end=originalSize}else{end=end|0}}if(wholeSlice(begin,end,originalSize)){return iterable}var resolvedBegin=resolveBegin(begin,originalSize);var resolvedEnd=resolveEnd(end,originalSize);if(resolvedBegin!==resolvedBegin||resolvedEnd!==resolvedEnd){return sliceFactory(iterable.toSeq().cacheResult(),begin,end,useKeys)}var resolvedSize=resolvedEnd-resolvedBegin;var sliceSize;if(resolvedSize===resolvedSize){sliceSize=resolvedSize<0?0:resolvedSize}var sliceSeq=makeSequence(iterable);sliceSeq.size=sliceSize===0?sliceSize:iterable.size&&sliceSize||undefined;if(!useKeys&&isSeq(iterable)&&sliceSize>=0){sliceSeq.get=function(index,notSetValue){index=wrapIndex(this,index);return index>=0&&index<sliceSize?iterable.get(index+resolvedBegin,notSetValue):notSetValue}}sliceSeq.__iterateUncached=function(fn,reverse){var this$0=this;if(sliceSize===0){return 0}if(reverse){return this.cacheResult().__iterate(fn,reverse)}var skipped=0;var isSkipping=true;var iterations=0;iterable.__iterate(function(v,k){if(!(isSkipping&&(isSkipping=skipped++<resolvedBegin))){iterations++;return fn(v,useKeys?k:iterations-1,this$0)!==false&&iterations!==sliceSize}});return iterations};sliceSeq.__iteratorUncached=function(type,reverse){if(sliceSize!==0&&reverse){return this.cacheResult().__iterator(type,reverse)}var iterator=sliceSize!==0&&iterable.__iterator(type,reverse);var skipped=0;var iterations=0;return new Iterator(function(){while(skipped++<resolvedBegin){iterator.next()}if(++iterations>sliceSize){return iteratorDone()}var step=iterator.next();if(useKeys||type===ITERATE_VALUES){return step}else if(type===ITERATE_KEYS){return iteratorValue(type,iterations-1,undefined,step)}else{return iteratorValue(type,iterations-1,step.value[1],step)}})};return sliceSeq}function takeWhileFactory(iterable,predicate,context){var takeSequence=makeSequence(iterable);takeSequence.__iterateUncached=function(fn,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterate(fn,reverse)}var iterations=0;iterable.__iterate(function(v,k,c){return predicate.call(context,v,k,c)&&++iterations&&fn(v,k,this$0)});return iterations};takeSequence.__iteratorUncached=function(type,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterator(type,reverse)}var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);var iterating=true;return new Iterator(function(){if(!iterating){return iteratorDone()}var step=iterator.next();if(step.done){return step}var entry=step.value;var k=entry[0];var v=entry[1];if(!predicate.call(context,v,k,this$0)){iterating=false;return iteratorDone()}
return type===ITERATE_ENTRIES?step:iteratorValue(type,k,v,step)})};return takeSequence}function skipWhileFactory(iterable,predicate,context,useKeys){var skipSequence=makeSequence(iterable);skipSequence.__iterateUncached=function(fn,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterate(fn,reverse)}var isSkipping=true;var iterations=0;iterable.__iterate(function(v,k,c){if(!(isSkipping&&(isSkipping=predicate.call(context,v,k,c)))){iterations++;return fn(v,useKeys?k:iterations-1,this$0)}});return iterations};skipSequence.__iteratorUncached=function(type,reverse){var this$0=this;if(reverse){return this.cacheResult().__iterator(type,reverse)}var iterator=iterable.__iterator(ITERATE_ENTRIES,reverse);var skipping=true;var iterations=0;return new Iterator(function(){var step,k,v;do{step=iterator.next();if(step.done){if(useKeys||type===ITERATE_VALUES){return step}else if(type===ITERATE_KEYS){return iteratorValue(type,iterations++,undefined,step)}else{return iteratorValue(type,iterations++,step.value[1],step)}}var entry=step.value;k=entry[0];v=entry[1];skipping&&(skipping=predicate.call(context,v,k,this$0))}while(skipping);return type===ITERATE_ENTRIES?step:iteratorValue(type,k,v,step)})};return skipSequence}function concatFactory(iterable,values){var isKeyedIterable=isKeyed(iterable);var iters=[iterable].concat(values).map(function(v){if(!isIterable(v)){v=isKeyedIterable?keyedSeqFromValue(v):indexedSeqFromValue(Array.isArray(v)?v:[v])}else if(isKeyedIterable){v=KeyedIterable(v)}return v}).filter(function(v){return v.size!==0});if(iters.length===0){return iterable}if(iters.length===1){var singleton=iters[0];if(singleton===iterable||isKeyedIterable&&isKeyed(singleton)||isIndexed(iterable)&&isIndexed(singleton)){return singleton}}var concatSeq=new ArraySeq(iters);if(isKeyedIterable){concatSeq=concatSeq.toKeyedSeq()}else if(!isIndexed(iterable)){concatSeq=concatSeq.toSetSeq()}concatSeq=concatSeq.flatten(true);concatSeq.size=iters.reduce(function(sum,seq){if(sum!==undefined){var size=seq.size;if(size!==undefined){return sum+size}}},0);return concatSeq}function flattenFactory(iterable,depth,useKeys){var flatSequence=makeSequence(iterable);flatSequence.__iterateUncached=function(fn,reverse){var iterations=0;var stopped=false;function flatDeep(iter,currentDepth){var this$0=this;iter.__iterate(function(v,k){if((!depth||currentDepth<depth)&&isIterable(v)){flatDeep(v,currentDepth+1)}else if(fn(v,useKeys?k:iterations++,this$0)===false){stopped=true}return!stopped},reverse)}flatDeep(iterable,0);return iterations};flatSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(type,reverse);var stack=[];var iterations=0;return new Iterator(function(){while(iterator){var step=iterator.next();if(step.done!==false){iterator=stack.pop();continue}var v=step.value;if(type===ITERATE_ENTRIES){v=v[1]}if((!depth||stack.length<depth)&&isIterable(v)){stack.push(iterator);iterator=v.__iterator(type,reverse)}else{return useKeys?step:iteratorValue(type,iterations++,v,step)}}return iteratorDone()})};return flatSequence}function flatMapFactory(iterable,mapper,context){var coerce=iterableClass(iterable);return iterable.toSeq().map(function(v,k){return coerce(mapper.call(context,v,k,iterable))}).flatten(true)}function interposeFactory(iterable,separator){var interposedSequence=makeSequence(iterable);interposedSequence.size=iterable.size&&iterable.size*2-1;interposedSequence.__iterateUncached=function(fn,reverse){var this$0=this;var iterations=0;iterable.__iterate(function(v,k){return(!iterations||fn(separator,iterations++,this$0)!==false)&&fn(v,iterations++,this$0)!==false},reverse);return iterations};interposedSequence.__iteratorUncached=function(type,reverse){var iterator=iterable.__iterator(ITERATE_VALUES,reverse);var iterations=0;var step;return new Iterator(function(){if(!step||iterations%2){step=iterator.next();if(step.done){return step}}return iterations%2?iteratorValue(type,iterations++,separator):iteratorValue(type,iterations++,step.value,step)})};return interposedSequence}function sortFactory(iterable,comparator,mapper){if(!comparator){comparator=defaultComparator}var isKeyedIterable=isKeyed(iterable);var index=0;var entries=iterable.toSeq().map(function(v,k){return[k,v,index++,mapper?mapper(v,k,iterable):v]}).toArray();entries.sort(function(a,b){return comparator(a[3],b[3])||a[2]-b[2]}).forEach(isKeyedIterable?function(v,i){entries[i].length=2}:function(v,i){entries[i]=v[1]});return isKeyedIterable?KeyedSeq(entries):isIndexed(iterable)?IndexedSeq(entries):SetSeq(entries)}function maxFactory(iterable,comparator,mapper){if(!comparator){comparator=defaultComparator}if(mapper){var entry=iterable.toSeq().map(function(v,k){return[v,mapper(v,k,iterable)]}).reduce(function(a,b){return maxCompare(comparator,a[1],b[1])?b:a});return entry&&entry[0]}else{return iterable.reduce(function(a,b){return maxCompare(comparator,a,b)?b:a})}}function maxCompare(comparator,a,b){var comp=comparator(b,a);return comp===0&&b!==a&&(b===undefined||b===null||b!==b)||comp>0}function zipWithFactory(keyIter,zipper,iters){var zipSequence=makeSequence(keyIter);zipSequence.size=new ArraySeq(iters).map(function(i){return i.size}).min();zipSequence.__iterate=function(fn,reverse){var iterator=this.__iterator(ITERATE_VALUES,reverse);var step;var iterations=0;while(!(step=iterator.next()).done){if(fn(step.value,iterations++,this)===false){break}}return iterations};zipSequence.__iteratorUncached=function(type,reverse){var iterators=iters.map(function(i){return i=Iterable(i),getIterator(reverse?i.reverse():i)});var iterations=0;var isDone=false;return new Iterator(function(){var steps;if(!isDone){steps=iterators.map(function(i){return i.next()});isDone=steps.some(function(s){return s.done})}if(isDone){return iteratorDone()}return iteratorValue(type,iterations++,zipper.apply(null,steps.map(function(s){return s.value})))})};return zipSequence}function reify(iter,seq){return isSeq(iter)?seq:iter.constructor(seq)}function validateEntry(entry){if(entry!==Object(entry)){throw new TypeError("Expected [K, V] tuple: "+entry)}}function resolveSize(iter){assertNotInfinite(iter.size);return ensureSize(iter)}function iterableClass(iterable){return isKeyed(iterable)?KeyedIterable:isIndexed(iterable)?IndexedIterable:SetIterable}function makeSequence(iterable){return Object.create((isKeyed(iterable)?KeyedSeq:isIndexed(iterable)?IndexedSeq:SetSeq).prototype)}function cacheResultThrough(){if(this._iter.cacheResult){this._iter.cacheResult();this.size=this._iter.size;return this}else{return Seq.prototype.cacheResult.call(this)}}function defaultComparator(a,b){return a>b?1:a<b?-1:0}function forceIterator(keyPath){var iter=getIterator(keyPath);if(!iter){if(!isArrayLike(keyPath)){throw new TypeError("Expected iterable or array-like: "+keyPath)}iter=getIterator(Iterable(keyPath))}return iter}createClass(Record,KeyedCollection);function Record(defaultValues,name){var hasInitialized;var RecordType=function Record(values){if(values instanceof RecordType){return values}if(!(this instanceof RecordType)){return new RecordType(values)}if(!hasInitialized){hasInitialized=true;var keys=Object.keys(defaultValues);setProps(RecordTypePrototype,keys);RecordTypePrototype.size=keys.length;RecordTypePrototype._name=name;RecordTypePrototype._keys=keys;RecordTypePrototype._defaultValues=defaultValues}this._map=Map(values)};var RecordTypePrototype=RecordType.prototype=Object.create(RecordPrototype);RecordTypePrototype.constructor=RecordType;return RecordType}Record.prototype.toString=function(){return this.__toString(recordName(this)+" {","}")};Record.prototype.has=function(k){return this._defaultValues.hasOwnProperty(k)};Record.prototype.get=function(k,notSetValue){if(!this.has(k)){return notSetValue}var defaultVal=this._defaultValues[k];return this._map?this._map.get(k,defaultVal):defaultVal};Record.prototype.clear=function(){if(this.__ownerID){this._map&&this._map.clear();return this}var RecordType=this.constructor;return RecordType._empty||(RecordType._empty=makeRecord(this,emptyMap()))};Record.prototype.set=function(k,v){if(!this.has(k)){throw new Error('Cannot set unknown key "'+k+'" on '+recordName(this))}if(this._map&&!this._map.has(k)){var defaultVal=this._defaultValues[k];if(v===defaultVal){return this}}var newMap=this._map&&this._map.set(k,v);if(this.__ownerID||newMap===this._map){return this}return makeRecord(this,newMap)};Record.prototype.remove=function(k){if(!this.has(k)){return this}var newMap=this._map&&this._map.remove(k);if(this.__ownerID||newMap===this._map){return this}return makeRecord(this,newMap)};Record.prototype.wasAltered=function(){return this._map.wasAltered()};Record.prototype.__iterator=function(type,reverse){var this$0=this;return KeyedIterable(this._defaultValues).map(function(_,k){return this$0.get(k)}).__iterator(type,reverse)};Record.prototype.__iterate=function(fn,reverse){var this$0=this;return KeyedIterable(this._defaultValues).map(function(_,k){return this$0.get(k)}).__iterate(fn,reverse)};Record.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}var newMap=this._map&&this._map.__ensureOwner(ownerID);if(!ownerID){this.__ownerID=ownerID;this._map=newMap;return this}return makeRecord(this,newMap,ownerID)};var RecordPrototype=Record.prototype;RecordPrototype[DELETE]=RecordPrototype.remove;RecordPrototype.deleteIn=RecordPrototype.removeIn=MapPrototype.removeIn;RecordPrototype.merge=MapPrototype.merge;RecordPrototype.mergeWith=MapPrototype.mergeWith;RecordPrototype.mergeIn=MapPrototype.mergeIn;RecordPrototype.mergeDeep=MapPrototype.mergeDeep;RecordPrototype.mergeDeepWith=MapPrototype.mergeDeepWith;RecordPrototype.mergeDeepIn=MapPrototype.mergeDeepIn;RecordPrototype.setIn=MapPrototype.setIn;RecordPrototype.update=MapPrototype.update;RecordPrototype.updateIn=MapPrototype.updateIn;RecordPrototype.withMutations=MapPrototype.withMutations;RecordPrototype.asMutable=MapPrototype.asMutable;RecordPrototype.asImmutable=MapPrototype.asImmutable;function makeRecord(likeRecord,map,ownerID){var record=Object.create(Object.getPrototypeOf(likeRecord));record._map=map;record.__ownerID=ownerID;return record}function recordName(record){return record._name||record.constructor.name||"Record"}function setProps(prototype,names){try{names.forEach(setProp.bind(undefined,prototype))}catch(error){}}function setProp(prototype,name){Object.defineProperty(prototype,name,{get:function(){return this.get(name)},set:function(value){invariant(this.__ownerID,"Cannot set on an immutable record.");this.set(name,value)}})}createClass(Set,SetCollection);function Set(value){return value===null||value===undefined?emptySet():isSet(value)&&!isOrdered(value)?value:emptySet().withMutations(function(set){var iter=SetIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v){return set.add(v)})})}Set.of=function(){return this(arguments)};Set.fromKeys=function(value){return this(KeyedIterable(value).keySeq())};Set.prototype.toString=function(){return this.__toString("Set {","}")};Set.prototype.has=function(value){return this._map.has(value)};Set.prototype.add=function(value){return updateSet(this,this._map.set(value,true))};Set.prototype.remove=function(value){return updateSet(this,this._map.remove(value))};Set.prototype.clear=function(){return updateSet(this,this._map.clear())};Set.prototype.union=function(){var iters=SLICE$0.call(arguments,0);iters=iters.filter(function(x){return x.size!==0});if(iters.length===0){return this}if(this.size===0&&!this.__ownerID&&iters.length===1){return this.constructor(iters[0])}return this.withMutations(function(set){for(var ii=0;ii<iters.length;ii++){SetIterable(iters[ii]).forEach(function(value){return set.add(value)})}})};Set.prototype.intersect=function(){var iters=SLICE$0.call(arguments,0);if(iters.length===0){return this}iters=iters.map(function(iter){return SetIterable(iter)});var originalSet=this;return this.withMutations(function(set){originalSet.forEach(function(value){if(!iters.every(function(iter){return iter.includes(value)})){set.remove(value)}})})};Set.prototype.subtract=function(){var iters=SLICE$0.call(arguments,0);if(iters.length===0){return this}iters=iters.map(function(iter){return SetIterable(iter)});var originalSet=this;return this.withMutations(function(set){originalSet.forEach(function(value){if(iters.some(function(iter){return iter.includes(value)})){set.remove(value)}})})};Set.prototype.merge=function(){return this.union.apply(this,arguments)};Set.prototype.mergeWith=function(merger){var iters=SLICE$0.call(arguments,1);return this.union.apply(this,iters)};Set.prototype.sort=function(comparator){return OrderedSet(sortFactory(this,comparator))};Set.prototype.sortBy=function(mapper,comparator){return OrderedSet(sortFactory(this,comparator,mapper))};Set.prototype.wasAltered=function(){return this._map.wasAltered()};Set.prototype.__iterate=function(fn,reverse){var this$0=this;return this._map.__iterate(function(_,k){return fn(k,k,this$0)},reverse)};Set.prototype.__iterator=function(type,reverse){return this._map.map(function(_,k){return k}).__iterator(type,reverse)};Set.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}var newMap=this._map.__ensureOwner(ownerID);if(!ownerID){this.__ownerID=ownerID;this._map=newMap;return this}return this.__make(newMap,ownerID)};function isSet(maybeSet){return!!(maybeSet&&maybeSet[IS_SET_SENTINEL])}Set.isSet=isSet;var IS_SET_SENTINEL="@@__IMMUTABLE_SET__@@";var SetPrototype=Set.prototype;SetPrototype[IS_SET_SENTINEL]=true;SetPrototype[DELETE]=SetPrototype.remove;SetPrototype.mergeDeep=SetPrototype.merge;SetPrototype.mergeDeepWith=SetPrototype.mergeWith;SetPrototype.withMutations=MapPrototype.withMutations;SetPrototype.asMutable=MapPrototype.asMutable;SetPrototype.asImmutable=MapPrototype.asImmutable;SetPrototype.__empty=emptySet;SetPrototype.__make=makeSet;function updateSet(set,newMap){if(set.__ownerID){set.size=newMap.size;set._map=newMap;return set}return newMap===set._map?set:newMap.size===0?set.__empty():set.__make(newMap)}function makeSet(map,ownerID){var set=Object.create(SetPrototype);set.size=map?map.size:0;set._map=map;set.__ownerID=ownerID;return set}var EMPTY_SET;function emptySet(){return EMPTY_SET||(EMPTY_SET=makeSet(emptyMap()))}createClass(OrderedSet,Set);function OrderedSet(value){return value===null||value===undefined?emptyOrderedSet():isOrderedSet(value)?value:emptyOrderedSet().withMutations(function(set){var iter=SetIterable(value);assertNotInfinite(iter.size);iter.forEach(function(v){return set.add(v)})})}OrderedSet.of=function(){return this(arguments)};OrderedSet.fromKeys=function(value){return this(KeyedIterable(value).keySeq())};OrderedSet.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function isOrderedSet(maybeOrderedSet){return isSet(maybeOrderedSet)&&isOrdered(maybeOrderedSet)}OrderedSet.isOrderedSet=isOrderedSet;var OrderedSetPrototype=OrderedSet.prototype;OrderedSetPrototype[IS_ORDERED_SENTINEL]=true;OrderedSetPrototype.__empty=emptyOrderedSet;OrderedSetPrototype.__make=makeOrderedSet;function makeOrderedSet(map,ownerID){var set=Object.create(OrderedSetPrototype);set.size=map?map.size:0;set._map=map;set.__ownerID=ownerID;return set}var EMPTY_ORDERED_SET;function emptyOrderedSet(){return EMPTY_ORDERED_SET||(EMPTY_ORDERED_SET=makeOrderedSet(emptyOrderedMap()))}createClass(Stack,IndexedCollection);function Stack(value){return value===null||value===undefined?emptyStack():isStack(value)?value:emptyStack().unshiftAll(value)}Stack.of=function(){return this(arguments)};Stack.prototype.toString=function(){return this.__toString("Stack [","]")};Stack.prototype.get=function(index,notSetValue){var head=this._head;index=wrapIndex(this,index);while(head&&index--){head=head.next}return head?head.value:notSetValue};Stack.prototype.peek=function(){return this._head&&this._head.value};Stack.prototype.push=function(){if(arguments.length===0){return this}var newSize=this.size+arguments.length;var head=this._head;for(var ii=arguments.length-1;ii>=0;ii--){head={value:arguments[ii],next:head}}if(this.__ownerID){this.size=newSize;this._head=head;this.__hash=undefined;this.__altered=true;return this}return makeStack(newSize,head)};Stack.prototype.pushAll=function(iter){iter=IndexedIterable(iter);if(iter.size===0){return this}assertNotInfinite(iter.size);var newSize=this.size;var head=this._head;iter.reverse().forEach(function(value){newSize++;head={value:value,next:head}});if(this.__ownerID){this.size=newSize;this._head=head;this.__hash=undefined;this.__altered=true;return this}return makeStack(newSize,head)};Stack.prototype.pop=function(){return this.slice(1)};Stack.prototype.unshift=function(){return this.push.apply(this,arguments)};Stack.prototype.unshiftAll=function(iter){return this.pushAll(iter)};Stack.prototype.shift=function(){return this.pop.apply(this,arguments)};Stack.prototype.clear=function(){if(this.size===0){return this}if(this.__ownerID){this.size=0;this._head=undefined;this.__hash=undefined;this.__altered=true;return this}return emptyStack()};Stack.prototype.slice=function(begin,end){if(wholeSlice(begin,end,this.size)){return this}var resolvedBegin=resolveBegin(begin,this.size);var resolvedEnd=resolveEnd(end,this.size);if(resolvedEnd!==this.size){return IndexedCollection.prototype.slice.call(this,begin,end)}var newSize=this.size-resolvedBegin;var head=this._head;while(resolvedBegin--){head=head.next}if(this.__ownerID){this.size=newSize;this._head=head;this.__hash=undefined;this.__altered=true;return this}return makeStack(newSize,head)};Stack.prototype.__ensureOwner=function(ownerID){if(ownerID===this.__ownerID){return this}if(!ownerID){this.__ownerID=ownerID;this.__altered=false;return this}return makeStack(this.size,this._head,ownerID,this.__hash)};Stack.prototype.__iterate=function(fn,reverse){if(reverse){return this.reverse().__iterate(fn)}var iterations=0;var node=this._head;while(node){if(fn(node.value,iterations++,this)===false){break}node=node.next}return iterations};Stack.prototype.__iterator=function(type,reverse){if(reverse){return this.reverse().__iterator(type)}var iterations=0;var node=this._head;return new Iterator(function(){if(node){var value=node.value;node=node.next;return iteratorValue(type,iterations++,value)}return iteratorDone()})};function isStack(maybeStack){return!!(maybeStack&&maybeStack[IS_STACK_SENTINEL])}Stack.isStack=isStack;var IS_STACK_SENTINEL="@@__IMMUTABLE_STACK__@@";var StackPrototype=Stack.prototype;StackPrototype[IS_STACK_SENTINEL]=true;StackPrototype.withMutations=MapPrototype.withMutations;StackPrototype.asMutable=MapPrototype.asMutable;StackPrototype.asImmutable=MapPrototype.asImmutable;StackPrototype.wasAltered=MapPrototype.wasAltered;function makeStack(size,head,ownerID,hash){var map=Object.create(StackPrototype);map.size=size;map._head=head;map.__ownerID=ownerID;map.__hash=hash;map.__altered=false;return map}var EMPTY_STACK;function emptyStack(){return EMPTY_STACK||(EMPTY_STACK=makeStack(0))}function mixin(ctor,methods){var keyCopier=function(key){ctor.prototype[key]=methods[key]};Object.keys(methods).forEach(keyCopier);Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(methods).forEach(keyCopier);return ctor}Iterable.Iterator=Iterator;mixin(Iterable,{toArray:function(){assertNotInfinite(this.size);var array=new Array(this.size||0);this.valueSeq().__iterate(function(v,i){array[i]=v});return array},toIndexedSeq:function(){return new ToIndexedSequence(this)},toJS:function(){return this.toSeq().map(function(value){return value&&typeof value.toJS==="function"?value.toJS():value}).__toJS()},toJSON:function(){return this.toSeq().map(function(value){return value&&typeof value.toJSON==="function"?value.toJSON():value}).__toJS()},toKeyedSeq:function(){return new ToKeyedSequence(this,true)},toMap:function(){return Map(this.toKeyedSeq())},toObject:function(){assertNotInfinite(this.size);var object={};this.__iterate(function(v,k){object[k]=v});return object},toOrderedMap:function(){return OrderedMap(this.toKeyedSeq())},toOrderedSet:function(){return OrderedSet(isKeyed(this)?this.valueSeq():this)},toSet:function(){return Set(isKeyed(this)?this.valueSeq():this)},toSetSeq:function(){return new ToSetSequence(this)},toSeq:function(){return isIndexed(this)?this.toIndexedSeq():isKeyed(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Stack(isKeyed(this)?this.valueSeq():this)},toList:function(){return List(isKeyed(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(head,tail){if(this.size===0){return head+tail}return head+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+tail},concat:function(){var values=SLICE$0.call(arguments,0);return reify(this,concatFactory(this,values))},includes:function(searchValue){return this.some(function(value){return is(value,searchValue)})},entries:function(){return this.__iterator(ITERATE_ENTRIES)},every:function(predicate,context){assertNotInfinite(this.size);var returnValue=true;this.__iterate(function(v,k,c){if(!predicate.call(context,v,k,c)){returnValue=false;return false}});return returnValue},filter:function(predicate,context){return reify(this,filterFactory(this,predicate,context,true))},find:function(predicate,context,notSetValue){var entry=this.findEntry(predicate,context);return entry?entry[1]:notSetValue},forEach:function(sideEffect,context){assertNotInfinite(this.size);return this.__iterate(context?sideEffect.bind(context):sideEffect)},join:function(separator){assertNotInfinite(this.size);separator=separator!==undefined?""+separator:",";var joined="";var isFirst=true;this.__iterate(function(v){isFirst?isFirst=false:joined+=separator;joined+=v!==null&&v!==undefined?v.toString():""});return joined},keys:function(){return this.__iterator(ITERATE_KEYS)},map:function(mapper,context){return reify(this,mapFactory(this,mapper,context))},reduce:function(reducer,initialReduction,context){assertNotInfinite(this.size);var reduction;var useFirst;if(arguments.length<2){useFirst=true}else{reduction=initialReduction}this.__iterate(function(v,k,c){if(useFirst){useFirst=false;reduction=v}else{reduction=reducer.call(context,reduction,v,k,c)}});return reduction},reduceRight:function(reducer,initialReduction,context){var reversed=this.toKeyedSeq().reverse();return reversed.reduce.apply(reversed,arguments)},reverse:function(){return reify(this,reverseFactory(this,true))},slice:function(begin,end){return reify(this,sliceFactory(this,begin,end,true))},some:function(predicate,context){return!this.every(not(predicate),context)},sort:function(comparator){return reify(this,sortFactory(this,comparator))},values:function(){return this.__iterator(ITERATE_VALUES)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==undefined?this.size===0:!this.some(function(){return true})},count:function(predicate,context){return ensureSize(predicate?this.toSeq().filter(predicate,context):this)},countBy:function(grouper,context){return countByFactory(this,grouper,context)},equals:function(other){return deepEqual(this,other)},entrySeq:function(){var iterable=this;if(iterable._cache){return new ArraySeq(iterable._cache)}var entriesSequence=iterable.toSeq().map(entryMapper).toIndexedSeq();entriesSequence.fromEntrySeq=function(){return iterable.toSeq()};return entriesSequence},filterNot:function(predicate,context){return this.filter(not(predicate),context)},findEntry:function(predicate,context,notSetValue){var found=notSetValue;this.__iterate(function(v,k,c){if(predicate.call(context,v,k,c)){found=[k,v];return false}});return found},findKey:function(predicate,context){var entry=this.findEntry(predicate,context);return entry&&entry[0]},findLast:function(predicate,context,notSetValue){return this.toKeyedSeq().reverse().find(predicate,context,notSetValue)},findLastEntry:function(predicate,context,notSetValue){return this.toKeyedSeq().reverse().findEntry(predicate,context,notSetValue)},findLastKey:function(predicate,context){return this.toKeyedSeq().reverse().findKey(predicate,context)},first:function(){return this.find(returnTrue)},flatMap:function(mapper,context){return reify(this,flatMapFactory(this,mapper,context))},flatten:function(depth){return reify(this,flattenFactory(this,depth,true))},fromEntrySeq:function(){return new FromEntriesSequence(this)},get:function(searchKey,notSetValue){return this.find(function(_,key){return is(key,searchKey)},undefined,notSetValue)},getIn:function(searchKeyPath,notSetValue){var nested=this;var iter=forceIterator(searchKeyPath);var step;while(!(step=iter.next()).done){var key=step.value;nested=nested&&nested.get?nested.get(key,NOT_SET):NOT_SET;if(nested===NOT_SET){return notSetValue}}return nested},groupBy:function(grouper,context){return groupByFactory(this,grouper,context)},has:function(searchKey){return this.get(searchKey,NOT_SET)!==NOT_SET},hasIn:function(searchKeyPath){return this.getIn(searchKeyPath,NOT_SET)!==NOT_SET},isSubset:function(iter){iter=typeof iter.includes==="function"?iter:Iterable(iter);return this.every(function(value){return iter.includes(value)})},isSuperset:function(iter){iter=typeof iter.isSubset==="function"?iter:Iterable(iter);return iter.isSubset(this)},keyOf:function(searchValue){return this.findKey(function(value){return is(value,searchValue)})},keySeq:function(){return this.toSeq().map(keyMapper).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(searchValue){return this.toKeyedSeq().reverse().keyOf(searchValue)},max:function(comparator){return maxFactory(this,comparator)},maxBy:function(mapper,comparator){return maxFactory(this,comparator,mapper)},min:function(comparator){return maxFactory(this,comparator?neg(comparator):defaultNegComparator)},minBy:function(mapper,comparator){return maxFactory(this,comparator?neg(comparator):defaultNegComparator,mapper)},rest:function(){return this.slice(1)},skip:function(amount){return this.slice(Math.max(0,amount))},skipLast:function(amount){return reify(this,this.toSeq().reverse().skip(amount).reverse())},skipWhile:function(predicate,context){return reify(this,skipWhileFactory(this,predicate,context,true))},skipUntil:function(predicate,context){return this.skipWhile(not(predicate),context)},sortBy:function(mapper,comparator){return reify(this,sortFactory(this,comparator,mapper))},take:function(amount){return this.slice(0,Math.max(0,amount))},takeLast:function(amount){return reify(this,this.toSeq().reverse().take(amount).reverse())},takeWhile:function(predicate,context){return reify(this,takeWhileFactory(this,predicate,context))},takeUntil:function(predicate,context){return this.takeWhile(not(predicate),context)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=hashIterable(this))}});var IterablePrototype=Iterable.prototype;IterablePrototype[IS_ITERABLE_SENTINEL]=true;IterablePrototype[ITERATOR_SYMBOL]=IterablePrototype.values;IterablePrototype.__toJS=IterablePrototype.toArray;IterablePrototype.__toStringMapper=quoteString;IterablePrototype.inspect=IterablePrototype.toSource=function(){return this.toString()};IterablePrototype.chain=IterablePrototype.flatMap;IterablePrototype.contains=IterablePrototype.includes;mixin(KeyedIterable,{flip:function(){return reify(this,flipFactory(this))},mapEntries:function(mapper,context){var this$0=this;var iterations=0;return reify(this,this.toSeq().map(function(v,k){return mapper.call(context,[k,v],iterations++,this$0)}).fromEntrySeq())},mapKeys:function(mapper,context){var this$0=this;return reify(this,this.toSeq().flip().map(function(k,v){return mapper.call(context,k,v,this$0)}).flip())}});var KeyedIterablePrototype=KeyedIterable.prototype;KeyedIterablePrototype[IS_KEYED_SENTINEL]=true;KeyedIterablePrototype[ITERATOR_SYMBOL]=IterablePrototype.entries;KeyedIterablePrototype.__toJS=IterablePrototype.toObject;KeyedIterablePrototype.__toStringMapper=function(v,k){return JSON.stringify(k)+": "+quoteString(v)};mixin(IndexedIterable,{toKeyedSeq:function(){return new ToKeyedSequence(this,false)},filter:function(predicate,context){return reify(this,filterFactory(this,predicate,context,false))},findIndex:function(predicate,context){var entry=this.findEntry(predicate,context);return entry?entry[0]:-1},indexOf:function(searchValue){var key=this.keyOf(searchValue);return key===undefined?-1:key},lastIndexOf:function(searchValue){var key=this.lastKeyOf(searchValue);return key===undefined?-1:key},reverse:function(){return reify(this,reverseFactory(this,false))},slice:function(begin,end){return reify(this,sliceFactory(this,begin,end,false))},splice:function(index,removeNum){var numArgs=arguments.length;removeNum=Math.max(removeNum|0,0);if(numArgs===0||numArgs===2&&!removeNum){return this}index=resolveBegin(index,index<0?this.count():this.size);var spliced=this.slice(0,index);return reify(this,numArgs===1?spliced:spliced.concat(arrCopy(arguments,2),this.slice(index+removeNum)))},findLastIndex:function(predicate,context){var entry=this.findLastEntry(predicate,context);return entry?entry[0]:-1},first:function(){return this.get(0)},flatten:function(depth){return reify(this,flattenFactory(this,depth,false))},get:function(index,notSetValue){index=wrapIndex(this,index);return index<0||(this.size===Infinity||this.size!==undefined&&index>this.size)?notSetValue:this.find(function(_,key){return key===index},undefined,notSetValue)},has:function(index){index=wrapIndex(this,index);return index>=0&&(this.size!==undefined?this.size===Infinity||index<this.size:this.indexOf(index)!==-1)},interpose:function(separator){return reify(this,interposeFactory(this,separator))},interleave:function(){var iterables=[this].concat(arrCopy(arguments));var zipped=zipWithFactory(this.toSeq(),IndexedSeq.of,iterables);var interleaved=zipped.flatten(true);if(zipped.size){interleaved.size=zipped.size*iterables.length}return reify(this,interleaved)},keySeq:function(){return Range(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(predicate,context){return reify(this,skipWhileFactory(this,predicate,context,false))},zip:function(){var iterables=[this].concat(arrCopy(arguments));return reify(this,zipWithFactory(this,defaultZipper,iterables))},zipWith:function(zipper){var iterables=arrCopy(arguments);iterables[0]=this;return reify(this,zipWithFactory(this,zipper,iterables))}});IndexedIterable.prototype[IS_INDEXED_SENTINEL]=true;IndexedIterable.prototype[IS_ORDERED_SENTINEL]=true;mixin(SetIterable,{get:function(value,notSetValue){return this.has(value)?value:notSetValue},includes:function(value){return this.has(value)},keySeq:function(){return this.valueSeq()}});SetIterable.prototype.has=IterablePrototype.includes;SetIterable.prototype.contains=SetIterable.prototype.includes;mixin(KeyedSeq,KeyedIterable.prototype);mixin(IndexedSeq,IndexedIterable.prototype);mixin(SetSeq,SetIterable.prototype);mixin(KeyedCollection,KeyedIterable.prototype);mixin(IndexedCollection,IndexedIterable.prototype);mixin(SetCollection,SetIterable.prototype);function keyMapper(v,k){return k}function entryMapper(v,k){return[k,v]}function not(predicate){return function(){return!predicate.apply(this,arguments)}}function neg(predicate){return function(){return-predicate.apply(this,arguments)}}function quoteString(value){return typeof value==="string"?JSON.stringify(value):String(value)}function defaultZipper(){return arrCopy(arguments)}function defaultNegComparator(a,b){return a<b?1:a>b?-1:0}function hashIterable(iterable){if(iterable.size===Infinity){return 0}var ordered=isOrdered(iterable);var keyed=isKeyed(iterable);var h=ordered?1:0;var size=iterable.__iterate(keyed?ordered?function(v,k){h=31*h+hashMerge(hash(v),hash(k))|0}:function(v,k){h=h+hashMerge(hash(v),hash(k))|0}:ordered?function(v){h=31*h+hash(v)|0}:function(v){h=h+hash(v)|0});return murmurHashOfSize(size,h)}function murmurHashOfSize(size,h){h=imul(h,3432918353);h=imul(h<<15|h>>>-15,461845907);h=imul(h<<13|h>>>-13,5)
;h=(h+3864292196|0)^size;h=imul(h^h>>>16,2246822507);h=imul(h^h>>>13,3266489909);h=smi(h^h>>>16);return h}function hashMerge(a,b){return a^b+2654435769+(a<<6)+(a>>2)|0}var Immutable={Iterable:Iterable,Seq:Seq,Collection:Collection,Map:Map,OrderedMap:OrderedMap,List:List,Stack:Stack,Set:Set,OrderedSet:OrderedSet,Record:Record,Range:Range,Repeat:Repeat,is:is,fromJS:fromJS};return Immutable})},{}],2:[function(require,module,exports){(function(process){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}}).call(this,require("_process"))},{"./debug":3,_process:12}],3:[function(require,module,exports){exports=module.exports=createDebug.debug=createDebug["default"]=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevTime;function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args.unshift("%O")}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);if("function"===typeof exports.init){exports.init(debug)}return debug}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var split=(typeof namespaces==="string"?namespaces:"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:10}],4:[function(require,module,exports){module.exports=getDocument;var DOCUMENT_NODE=9;function isDocument(d){return d&&d.nodeType===DOCUMENT_NODE}function getDocument(node){if(isDocument(node)){return node}else if(isDocument(node.ownerDocument)){return node.ownerDocument}else if(isDocument(node.document)){return node.document}else if(node.parentNode){return getDocument(node.parentNode)}else if(node.commonAncestorContainer){return getDocument(node.commonAncestorContainer)}else if(node.startContainer){return getDocument(node.startContainer)}else if(node.anchorNode){return getDocument(node.anchorNode)}}},{}],5:[function(require,module,exports){var getDocument=require("get-document");module.exports=getWindow;var needsIEFallback=require("./needs-ie-fallback");function isWindow(w){return w&&w.window===w}function getWindow(node){if(isWindow(node)){return node}var doc=getDocument(node);if(needsIEFallback){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win}else{return doc.defaultView||doc.parentWindow}}},{"./needs-ie-fallback":6,"get-document":4}],6:[function(require,module,exports){module.exports=!!document.attachEvent&&window!==document.parentWindow},{}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var isBrowser=exports.isBrowser=(typeof window==="undefined"?"undefined":_typeof(window))==="object"&&(typeof document==="undefined"?"undefined":_typeof(document))==="object"&&document.nodeType===9;exports.default=isBrowser},{}],8:[function(require,module,exports){"use strict";exports.atob=self.atob.bind(self);exports.btoa=self.btoa.bind(self)},{}],9:[function(require,module,exports){function keyCode(searchInput){if(searchInput&&"object"===typeof searchInput){var hasKeyCode=searchInput.which||searchInput.keyCode||searchInput.charCode;if(hasKeyCode)searchInput=hasKeyCode}if("number"===typeof searchInput)return names[searchInput];var search=String(searchInput);var foundNamedKey=codes[search.toLowerCase()];if(foundNamedKey)return foundNamedKey;var foundNamedKey=aliases[search.toLowerCase()];if(foundNamedKey)return foundNamedKey;if(search.length===1)return search.charCodeAt(0);return undefined}keyCode.isEventKey=function isEventKey(event,nameOrCode){if(event&&"object"===typeof event){var keyCode=event.which||event.keyCode||event.charCode;if(keyCode===null||keyCode===undefined){return false}if(typeof nameOrCode==="string"){var foundNamedKey=codes[nameOrCode.toLowerCase()];if(foundNamedKey){return foundNamedKey===keyCode}var foundNamedKey=aliases[nameOrCode.toLowerCase()];if(foundNamedKey){return foundNamedKey===keyCode}}else if(typeof nameOrCode==="number"){return nameOrCode===keyCode}return false}};exports=module.exports=keyCode;var codes=exports.code=exports.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};var aliases=exports.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(i=97;i<123;i++)codes[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)codes[i-48]=i;for(i=1;i<13;i++)codes["f"+i]=i+111;for(i=0;i<10;i++)codes["numpad "+i]=i+96;var names=exports.names=exports.title={};for(i in codes)names[codes[i]]=i;for(var alias in aliases){codes[alias]=aliases[alias]}},{}],10:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==="string"&&val.length>0){return parse(val)}else if(type==="number"&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>100){return}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return}var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+"d"}if(ms>=h){return Math.round(ms/h)+"h"}if(ms>=m){return Math.round(ms/m)+"m"}if(ms>=s){return Math.round(ms/s)+"s"}return ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n){return}if(ms<n*1.5){return Math.floor(ms/n)+" "+name}return Math.ceil(ms/n)+" "+name+"s"}},{}],11:[function(require,module,exports){"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols;var hasOwnProperty=Object.prototype.hasOwnProperty;var propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(val===null||val===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(val)}function shouldUseNative(){try{if(!Object.assign){return false}var test1=new String("abc");test1[5]="de";if(Object.getOwnPropertyNames(test1)[0]==="5"){return false}var test2={};for(var i=0;i<10;i++){test2["_"+String.fromCharCode(i)]=i}var order2=Object.getOwnPropertyNames(test2).map(function(n){return test2[n]});if(order2.join("")!=="0123456789"){return false}var test3={};"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter});if(Object.keys(Object.assign({},test3)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(err){return false}}module.exports=shouldUseNative()?Object.assign:function(target,source){var from;var to=toObject(target);var symbols;for(var s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from){if(hasOwnProperty.call(from,key)){to[key]=from[key]}}if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++){if(propIsEnumerable.call(from,symbols[i])){to[symbols[i]]=from[symbols[i]]}}}}return to}},{}],12:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],13:[function(require,module,exports){"use strict";var printWarning=function(){};if("production"!=="production"){var ReactPropTypesSecret=require("./lib/ReactPropTypesSecret");var loggedTypeFailures={};printWarning=function(text){var message="Warning: "+text;if(typeof console!=="undefined"){console.error(message)}try{throw new Error(message)}catch(x){}}}function checkPropTypes(typeSpecs,values,location,componentName,getStack){if("production"!=="production"){for(var typeSpecName in typeSpecs){if(typeSpecs.hasOwnProperty(typeSpecName)){var error;try{if(typeof typeSpecs[typeSpecName]!=="function"){var err=Error((componentName||"React class")+": "+location+" type `"+typeSpecName+"` is invalid; "+"it must be a function, usually from the `prop-types` package, but received `"+typeof typeSpecs[typeSpecName]+"`.");err.name="Invariant Violation";throw err}error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret)}catch(ex){error=ex}if(error&&!(error instanceof Error)){printWarning((componentName||"React class")+": type specification of "+location+" `"+typeSpecName+"` is invalid; the type checker "+"function must return `null` or an `Error` but returned a "+typeof error+". "+"You may have forgotten to pass an argument to the type checker "+"creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and "+"shape all require an argument).")}if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=true;var stack=getStack?getStack():"";printWarning("Failed "+location+" type: "+error.message+(stack!=null?stack:""))}}}}}module.exports=checkPropTypes},{"./lib/ReactPropTypesSecret":17}],14:[function(require,module,exports){"use strict";var ReactPropTypesSecret=require("./lib/ReactPropTypesSecret");function emptyFunction(){}module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret===ReactPropTypesSecret){return}var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use PropTypes.checkPropTypes() to call them. "+"Read more at http://fb.me/use-check-prop-types");err.name="Invariant Violation";throw err}shim.isRequired=shim;function getShim(){return shim}var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim};ReactPropTypes.checkPropTypes=emptyFunction;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}},{"./lib/ReactPropTypesSecret":17}],15:[function(require,module,exports){"use strict";var assign=require("object-assign");var ReactPropTypesSecret=require("./lib/ReactPropTypesSecret");var checkPropTypes=require("./checkPropTypes");var printWarning=function(){};if("production"!=="production"){printWarning=function(text){var message="Warning: "+text;if(typeof console!=="undefined"){console.error(message)}try{throw new Error(message)}catch(x){}}}function emptyFunctionThatReturnsNull(){return null}module.exports=function(isValidElement,throwOnDirectAccess){var ITERATOR_SYMBOL=typeof Symbol==="function"&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL="@@iterator";function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==="function"){return iteratorFn}}var ANONYMOUS="<<anonymous>>";var ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),symbol:createPrimitiveTypeChecker("symbol"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker,exact:createStrictShapeTypeChecker};function is(x,y){if(x===y){return x!==0||1/x===1/y}else{return x!==x&&y!==y}}function PropTypeError(message){this.message=message;this.stack=""}PropTypeError.prototype=Error.prototype;function createChainableTypeChecker(validate){if("production"!=="production"){var manualPropTypeCallCache={};var manualPropTypeWarningCount=0}function checkType(isRequired,props,propName,componentName,location,propFullName,secret){componentName=componentName||ANONYMOUS;propFullName=propFullName||propName;if(secret!==ReactPropTypesSecret){if(throwOnDirectAccess){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use `PropTypes.checkPropTypes()` to call them. "+"Read more at http://fb.me/use-check-prop-types");err.name="Invariant Violation";throw err}else if("production"!=="production"&&typeof console!=="undefined"){var cacheKey=componentName+":"+propName;if(!manualPropTypeCallCache[cacheKey]&&manualPropTypeWarningCount<3){printWarning("You are manually calling a React.PropTypes validation "+"function for the `"+propFullName+"` prop on `"+componentName+"`. This is deprecated "+"and will throw in the standalone `prop-types` package. "+"You may be seeing this warning due to a third-party PropTypes "+"library. See https://fb.me/react-warning-dont-call-proptypes "+"for details.");manualPropTypeCallCache[cacheKey]=true;manualPropTypeWarningCount++}}}if(props[propName]==null){if(isRequired){if(props[propName]===null){return new PropTypeError("The "+location+" `"+propFullName+"` is marked as required "+("in `"+componentName+"`, but its value is `null`."))}return new PropTypeError("The "+location+" `"+propFullName+"` is marked as required in "+("`"+componentName+"`, but its value is `undefined`."))}return null}else{return validate(props,propName,componentName,location,propFullName)}}var chainedCheckType=checkType.bind(null,false);chainedCheckType.isRequired=checkType.bind(null,true);return chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName,secret){var propValue=props[propName];var propType=getPropType(propValue);if(propType!==expectedType){var preciseType=getPreciseType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+preciseType+"` supplied to `"+componentName+"`, expected ")+("`"+expectedType+"`."))}return null}return createChainableTypeChecker(validate)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunctionThatReturnsNull)}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=="function"){return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside arrayOf.")}var propValue=props[propName];if(!Array.isArray(propValue)){var propType=getPropType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an array."))}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+"["+i+"]",ReactPropTypesSecret);if(error instanceof Error){return error}}return null}return createChainableTypeChecker(validate)}function createElementTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!isValidElement(propValue)){var propType=getPropType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected a single ReactElement."))}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var expectedClassName=expectedClass.name||ANONYMOUS;var actualClassName=getClassName(props[propName]);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+actualClassName+"` supplied to `"+componentName+"`, expected ")+("instance of `"+expectedClassName+"`."))}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){if(!Array.isArray(expectedValues)){"production"!=="production"?printWarning("Invalid argument supplied to oneOf, expected an instance of array."):void 0;return emptyFunctionThatReturnsNull}function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];for(var i=0;i<expectedValues.length;i++){if(is(propValue,expectedValues[i])){return null}}var valuesString=JSON.stringify(expectedValues);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of value `"+propValue+"` "+("supplied to `"+componentName+"`, expected one of "+valuesString+"."))}return createChainableTypeChecker(validate)}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=="function"){return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside objectOf.")}var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an object."))}for(var key in propValue){if(propValue.hasOwnProperty(key)){var error=typeChecker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error instanceof Error){return error}}}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){if(!Array.isArray(arrayOfTypeCheckers)){"production"!=="production"?printWarning("Invalid argument supplied to oneOfType, expected an instance of array."):void 0;return emptyFunctionThatReturnsNull}for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(typeof checker!=="function"){printWarning("Invalid argument supplied to oneOfType. Expected an array of check functions, but "+"received "+getPostfixForTypeWarning(checker)+" at index "+i+".");return emptyFunctionThatReturnsNull}}function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(checker(props,propName,componentName,location,propFullName,ReactPropTypesSecret)==null){return null}}return new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to "+("`"+componentName+"`."))}return createChainableTypeChecker(validate)}function createNodeChecker(){function validate(props,propName,componentName,location,propFullName){if(!isNode(props[propName])){return new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to "+("`"+componentName+"`, expected a ReactNode."))}return null}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}for(var key in shapeTypes){var checker=shapeTypes[key];if(!checker){continue}var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error){return error}}return null}return createChainableTypeChecker(validate)}function createStrictShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}var allKeys=assign({},props[propName],shapeTypes);for(var key in allKeys){var checker=shapeTypes[key];if(!checker){return new PropTypeError("Invalid "+location+" `"+propFullName+"` key `"+key+"` supplied to `"+componentName+"`."+"\nBad object: "+JSON.stringify(props[propName],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(shapeTypes),null,"  "))}var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error){return error}}return null}return createChainableTypeChecker(validate)}function isNode(propValue){switch(typeof propValue){case"number":case"string":case"undefined":return true;case"boolean":return!propValue;case"object":if(Array.isArray(propValue)){return propValue.every(isNode)}if(propValue===null||isValidElement(propValue)){return true}var iteratorFn=getIteratorFn(propValue);if(iteratorFn){var iterator=iteratorFn.call(propValue);var step;if(iteratorFn!==propValue.entries){while(!(step=iterator.next()).done){if(!isNode(step.value)){return false}}}else{while(!(step=iterator.next()).done){var entry=step.value;if(entry){if(!isNode(entry[1])){return false}}}}}else{return false}return true;default:return false}}function isSymbol(propType,propValue){if(propType==="symbol"){return true}if(propValue["@@toStringTag"]==="Symbol"){return true}if(typeof Symbol==="function"&&propValue instanceof Symbol){return true}return false}function getPropType(propValue){var propType=typeof propValue;if(Array.isArray(propValue)){return"array"}if(propValue instanceof RegExp){return"object"}if(isSymbol(propType,propValue)){return"symbol"}return propType}function getPreciseType(propValue){if(typeof propValue==="undefined"||propValue===null){return""+propValue}var propType=getPropType(propValue);if(propType==="object"){if(propValue instanceof Date){return"date"}else if(propValue instanceof RegExp){return"regexp"}}return propType}function getPostfixForTypeWarning(value){var type=getPreciseType(value);switch(type){case"array":case"object":return"an "+type;case"boolean":case"date":case"regexp":return"a "+type;default:return type}}function getClassName(propValue){if(!propValue.constructor||!propValue.constructor.name){return ANONYMOUS}return propValue.constructor.name}ReactPropTypes.checkPropTypes=checkPropTypes;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}},{"./checkPropTypes":13,"./lib/ReactPropTypesSecret":17,"object-assign":11}],16:[function(require,module,exports){if("production"!=="production"){var REACT_ELEMENT_TYPE=typeof Symbol==="function"&&Symbol.for&&Symbol.for("react.element")||60103;var isValidElement=function(object){return typeof object==="object"&&object!==null&&object.$$typeof===REACT_ELEMENT_TYPE};var throwOnDirectAccess=true;module.exports=require("./factoryWithTypeCheckers")(isValidElement,throwOnDirectAccess)}else{module.exports=require("./factoryWithThrowingShims")()}},{"./factoryWithThrowingShims":14,"./factoryWithTypeCheckers":15}],17:[function(require,module,exports){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},{}],18:[function(require,module,exports){"use strict";var Immutable=require("immutable");var ANONYMOUS="<<anonymous>>";var ImmutablePropTypes={listOf:createListOfTypeChecker,mapOf:createMapOfTypeChecker,orderedMapOf:createOrderedMapOfTypeChecker,setOf:createSetOfTypeChecker,orderedSetOf:createOrderedSetOfTypeChecker,stackOf:createStackOfTypeChecker,iterableOf:createIterableOfTypeChecker,recordOf:createRecordOfTypeChecker,shape:createShapeChecker,contains:createShapeChecker,mapContains:createMapContainsChecker,list:createImmutableTypeChecker("List",Immutable.List.isList),map:createImmutableTypeChecker("Map",Immutable.Map.isMap),orderedMap:createImmutableTypeChecker("OrderedMap",Immutable.OrderedMap.isOrderedMap),set:createImmutableTypeChecker("Set",Immutable.Set.isSet),orderedSet:createImmutableTypeChecker("OrderedSet",Immutable.OrderedSet.isOrderedSet),stack:createImmutableTypeChecker("Stack",Immutable.Stack.isStack),seq:createImmutableTypeChecker("Seq",Immutable.Seq.isSeq),record:createImmutableTypeChecker("Record",function(isRecord){return isRecord instanceof Immutable.Record}),iterable:createImmutableTypeChecker("Iterable",Immutable.Iterable.isIterable)};function getPropType(propValue){var propType=typeof propValue;if(Array.isArray(propValue)){return"array"}if(propValue instanceof RegExp){return"object"}if(propValue instanceof Immutable.Iterable){return"Immutable."+propValue.toSource().split(" ")[0]}return propType}function createChainableTypeChecker(validate){function checkType(isRequired,props,propName,componentName,location,propFullName){for(var _len=arguments.length,rest=Array(_len>6?_len-6:0),_key=6;_key<_len;_key++){rest[_key-6]=arguments[_key]}propFullName=propFullName||propName;componentName=componentName||ANONYMOUS;if(props[propName]==null){var locationName=location;if(isRequired){return new Error("Required "+locationName+" `"+propFullName+"` was not specified in "+("`"+componentName+"`."))}}else{return validate.apply(undefined,[props,propName,componentName,location,propFullName].concat(rest))}}var chainedCheckType=checkType.bind(null,false)
;chainedCheckType.isRequired=checkType.bind(null,true);return chainedCheckType}function createImmutableTypeChecker(immutableClassName,immutableClassTypeValidator){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!immutableClassTypeValidator(propValue)){var propType=getPropType(propValue);return new Error("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `"+immutableClassName+"`."))}return null}return createChainableTypeChecker(validate)}function createIterableTypeChecker(typeChecker,immutableClassName,immutableClassTypeValidator){function validate(props,propName,componentName,location,propFullName){for(var _len=arguments.length,rest=Array(_len>5?_len-5:0),_key=5;_key<_len;_key++){rest[_key-5]=arguments[_key]}var propValue=props[propName];if(!immutableClassTypeValidator(propValue)){var locationName=location;var propType=getPropType(propValue);return new Error("Invalid "+locationName+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an Immutable.js "+immutableClassName+"."))}if(typeof typeChecker!=="function"){return new Error("Invalid typeChecker supplied to `"+componentName+"` "+("for propType `"+propFullName+"`, expected a function."))}var propValues=propValue.toArray();for(var i=0,len=propValues.length;i<len;i++){var error=typeChecker.apply(undefined,[propValues,i,componentName,location,""+propFullName+"["+i+"]"].concat(rest));if(error instanceof Error){return error}}}return createChainableTypeChecker(validate)}function createKeysTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){for(var _len=arguments.length,rest=Array(_len>5?_len-5:0),_key=5;_key<_len;_key++){rest[_key-5]=arguments[_key]}var propValue=props[propName];if(typeof typeChecker!=="function"){return new Error("Invalid keysTypeChecker (optional second argument) supplied to `"+componentName+"` "+("for propType `"+propFullName+"`, expected a function."))}var keys=propValue.keySeq().toArray();for(var i=0,len=keys.length;i<len;i++){var error=typeChecker.apply(undefined,[keys,i,componentName,location,""+propFullName+" -> key("+keys[i]+")"].concat(rest));if(error instanceof Error){return error}}}return createChainableTypeChecker(validate)}function createListOfTypeChecker(typeChecker){return createIterableTypeChecker(typeChecker,"List",Immutable.List.isList)}function createMapOfTypeCheckerFactory(valuesTypeChecker,keysTypeChecker,immutableClassName,immutableClassTypeValidator){function validate(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return createIterableTypeChecker(valuesTypeChecker,immutableClassName,immutableClassTypeValidator).apply(undefined,args)||keysTypeChecker&&createKeysTypeChecker(keysTypeChecker).apply(undefined,args)}return createChainableTypeChecker(validate)}function createMapOfTypeChecker(valuesTypeChecker,keysTypeChecker){return createMapOfTypeCheckerFactory(valuesTypeChecker,keysTypeChecker,"Map",Immutable.Map.isMap)}function createOrderedMapOfTypeChecker(valuesTypeChecker,keysTypeChecker){return createMapOfTypeCheckerFactory(valuesTypeChecker,keysTypeChecker,"OrderedMap",Immutable.OrderedMap.isOrderedMap)}function createSetOfTypeChecker(typeChecker){return createIterableTypeChecker(typeChecker,"Set",Immutable.Set.isSet)}function createOrderedSetOfTypeChecker(typeChecker){return createIterableTypeChecker(typeChecker,"OrderedSet",Immutable.OrderedSet.isOrderedSet)}function createStackOfTypeChecker(typeChecker){return createIterableTypeChecker(typeChecker,"Stack",Immutable.Stack.isStack)}function createIterableOfTypeChecker(typeChecker){return createIterableTypeChecker(typeChecker,"Iterable",Immutable.Iterable.isIterable)}function createRecordOfTypeChecker(recordKeys){function validate(props,propName,componentName,location,propFullName){for(var _len=arguments.length,rest=Array(_len>5?_len-5:0),_key=5;_key<_len;_key++){rest[_key-5]=arguments[_key]}var propValue=props[propName];if(!(propValue instanceof Immutable.Record)){var propType=getPropType(propValue);var locationName=location;return new Error("Invalid "+locationName+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected an Immutable.js Record."))}for(var key in recordKeys){var checker=recordKeys[key];if(!checker){continue}var mutablePropValue=propValue.toObject();var error=checker.apply(undefined,[mutablePropValue,key,componentName,location,""+propFullName+"."+key].concat(rest));if(error){return error}}}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){var immutableClassName=arguments[1]===undefined?"Iterable":arguments[1];var immutableClassTypeValidator=arguments[2]===undefined?Immutable.Iterable.isIterable:arguments[2];function validate(props,propName,componentName,location,propFullName){for(var _len=arguments.length,rest=Array(_len>5?_len-5:0),_key=5;_key<_len;_key++){rest[_key-5]=arguments[_key]}var propValue=props[propName];if(!immutableClassTypeValidator(propValue)){var propType=getPropType(propValue);var locationName=location;return new Error("Invalid "+locationName+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected an Immutable.js "+immutableClassName+"."))}var mutablePropValue=propValue.toObject();for(var key in shapeTypes){var checker=shapeTypes[key];if(!checker){continue}var error=checker.apply(undefined,[mutablePropValue,key,componentName,location,""+propFullName+"."+key].concat(rest));if(error){return error}}}return createChainableTypeChecker(validate)}function createShapeChecker(shapeTypes){return createShapeTypeChecker(shapeTypes)}function createMapContainsChecker(shapeTypes){return createShapeTypeChecker(shapeTypes,"Map",Immutable.Map.isMap)}module.exports=ImmutablePropTypes},{immutable:1}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=window.React;var _react2=_interopRequireDefault(_react);var _reactDom=window.ReactDOM;var _reactDom2=_interopRequireDefault(_reactDom);var _propTypes=require("prop-types");var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var KEYCODES={ESCAPE:27};var Portal=function(_React$Component){_inherits(Portal,_React$Component);function Portal(){_classCallCheck(this,Portal);var _this=_possibleConstructorReturn(this,(Portal.__proto__||Object.getPrototypeOf(Portal)).call(this));_this.state={active:false};_this.handleWrapperClick=_this.handleWrapperClick.bind(_this);_this.closePortal=_this.closePortal.bind(_this);_this.handleOutsideMouseClick=_this.handleOutsideMouseClick.bind(_this);_this.handleKeydown=_this.handleKeydown.bind(_this);_this.portal=null;_this.node=null;return _this}_createClass(Portal,[{key:"componentDidMount",value:function componentDidMount(){if(this.props.closeOnEsc){document.addEventListener("keydown",this.handleKeydown)}if(this.props.closeOnOutsideClick){document.addEventListener("mouseup",this.handleOutsideMouseClick);document.addEventListener("touchstart",this.handleOutsideMouseClick)}if(this.props.isOpened){this.openPortal()}}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(newProps){if(typeof newProps.isOpened!=="undefined"){if(newProps.isOpened){if(this.state.active){this.renderPortal(newProps)}else{this.openPortal(newProps)}}if(!newProps.isOpened&&this.state.active){this.closePortal()}}if(typeof newProps.isOpened==="undefined"&&this.state.active){this.renderPortal(newProps)}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.props.closeOnEsc){document.removeEventListener("keydown",this.handleKeydown)}if(this.props.closeOnOutsideClick){document.removeEventListener("mouseup",this.handleOutsideMouseClick);document.removeEventListener("touchstart",this.handleOutsideMouseClick)}this.closePortal(true)}},{key:"handleWrapperClick",value:function handleWrapperClick(e){e.preventDefault();e.stopPropagation();if(this.state.active){return}this.openPortal()}},{key:"openPortal",value:function openPortal(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props;this.setState({active:true});this.renderPortal(props);this.props.onOpen(this.node)}},{key:"closePortal",value:function closePortal(){var _this2=this;var isUnmounted=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var resetPortalState=function resetPortalState(overrideIsUnmounted){if(_this2.node){_reactDom2.default.unmountComponentAtNode(_this2.node);document.body.removeChild(_this2.node)}_this2.portal=null;_this2.node=null;var finalIsUnmounted=overrideIsUnmounted===undefined?isUnmounted:overrideIsUnmounted;if(finalIsUnmounted!==true){_this2.setState({active:false})}};if(this.state.active){if(this.props.beforeClose){this.props.beforeClose(this.node,resetPortalState)}else{resetPortalState()}this.props.onClose()}}},{key:"handleOutsideMouseClick",value:function handleOutsideMouseClick(e){if(!this.state.active){return}var root=(0,_reactDom.findDOMNode)(this.portal);if(root.contains(e.target)||e.button&&e.button!==0){return}e.stopPropagation();this.closePortal()}},{key:"handleKeydown",value:function handleKeydown(e){if(e.keyCode===KEYCODES.ESCAPE&&this.state.active){this.closePortal()}}},{key:"renderPortal",value:function renderPortal(props){if(!this.node){this.node=document.createElement("div");document.body.appendChild(this.node)}var children=props.children;if(typeof props.children.type==="function"){children=_react2.default.cloneElement(props.children,{closePortal:this.closePortal})}this.portal=_reactDom2.default.unstable_renderSubtreeIntoContainer(this,children,this.node,this.props.onUpdate)}},{key:"render",value:function render(){if(this.props.openByClickOn){return _react2.default.cloneElement(this.props.openByClickOn,{onClick:this.handleWrapperClick})}return null}}]);return Portal}(_react2.default.Component);exports.default=Portal;Portal.propTypes={children:_propTypes2.default.element.isRequired,openByClickOn:_propTypes2.default.element,closeOnEsc:_propTypes2.default.bool,closeOnOutsideClick:_propTypes2.default.bool,isOpened:_propTypes2.default.bool,onOpen:_propTypes2.default.func,onClose:_propTypes2.default.func,beforeClose:_propTypes2.default.func,onUpdate:_propTypes2.default.func};Portal.defaultProps={onOpen:function onOpen(){},onClose:function onClose(){},onUpdate:function onUpdate(){}};module.exports=exports["default"]},{"prop-types":16}],20:[function(require,module,exports){function isBackward(selection){var startNode=selection.anchorNode;var startOffset=selection.anchorOffset;var endNode=selection.focusNode;var endOffset=selection.focusOffset;var position=startNode.compareDocumentPosition(endNode);return!(position===4||position===0&&startOffset<endOffset)}module.exports=isBackward},{}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slate=window.Slate;var _isomorphicBase=require("isomorphic-base64");function encode(object){var string=JSON.stringify(object);var encoded=(0,_isomorphicBase.btoa)(encodeURIComponent(string));return encoded}function decode(string){var decoded=decodeURIComponent((0,_isomorphicBase.atob)(string));var object=JSON.parse(decoded);return object}function deserialize(string,options){var raw=decode(string);var state=_slate.State.fromJSON(raw,options);return state}function deserializeNode(string,options){var _require=window.Slate,Node=_require.Node;var raw=decode(string);var node=Node.fromJSON(raw,options);return node}function serialize(state,options){var raw=state.toJSON(options);var encoded=encode(raw);return encoded}function serializeNode(node,options){var raw=node.toJSON(options);var encoded=encode(raw);return encoded}exports.default={deserialize:deserialize,deserializeNode:deserializeNode,serialize:serialize,serializeNode:serializeNode}},{"isomorphic-base64":8}],22:[function(require,module,exports){(function(global){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var global$1=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout;var cachedClearTimeout=defaultClearTimeout;if(typeof global$1.setTimeout==="function"){cachedSetTimeout=setTimeout}if(typeof global$1.clearTimeout==="function"){cachedClearTimeout=clearTimeout}function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}function nextTick(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}}function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser";var platform="browser";var browser=true;var env={};var argv=[];var version="";var versions={};var release={};var config={};function noop(){}var on=noop;var addListener=noop;var once=noop;var off=noop;var removeListener=noop;var removeAllListeners=noop;var emit=noop;function binding(name){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(dir){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance=global$1.performance||{};var performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()};function hrtime(previousTimestamp){var clocktime=performanceNow.call(performance)*.001;var seconds=Math.floor(clocktime);var nanoseconds=Math.floor(clocktime%1*1e9);if(previousTimestamp){seconds=seconds-previousTimestamp[0];nanoseconds=nanoseconds-previousTimestamp[1];if(nanoseconds<0){seconds--;nanoseconds+=1e9}}return[seconds,nanoseconds]}var startTime=new Date;function uptime(){var currentTime=new Date;var dif=currentTime-startTime;return dif/1e3}var process={nextTick:nextTick,title:title,browser:browser,env:env,argv:argv,version:version,versions:versions,on:on,addListener:addListener,once:once,off:off,removeListener:removeListener,removeAllListeners:removeAllListeners,emit:emit,binding:binding,cwd:cwd,chdir:chdir,umask:umask,hrtime:hrtime,platform:platform,release:release,config:config,uptime:uptime};var FORBID_DEPRECATE=process&&process.env&&process.env.FORBID_DEPRECATIONS;var FORBID_WARNING=process&&process.env&&process.env.FORBID_WARNINGS;var IS_DEV=typeof process!=="undefined"&&process.env&&"development"!=="production";var HAS_CONSOLE=typeof console!="undefined"&&typeof console.log=="function"&&typeof console.warn=="function"&&typeof console.error=="function";function log(level,message){if(!IS_DEV){return}if(HAS_CONSOLE){var _console;for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=arguments[_key]}(_console=console)[level].apply(_console,[message].concat(args))}}function error(message){if(HAS_CONSOLE){var _console2;for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2]}(_console2=console).error.apply(_console2,[message].concat(args))}}function warn(message){var logger=FORBID_WARNING?forbidden:log;for(var _len3=arguments.length,args=Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++){args[_key3-1]=arguments[_key3]}logger.apply(undefined,["warn","Warning: "+message].concat(args))}function deprecate(version$$1,message){var logger=FORBID_DEPRECATE?forbidden:log;for(var _len4=arguments.length,args=Array(_len4>2?_len4-2:0),_key4=2;_key4<_len4;_key4++){args[_key4-2]=arguments[_key4]}logger.apply(undefined,["warn","Deprecation ("+version$$1+"): "+message].concat(args))}function forbidden(level,message){throw new Error(message)}var index={deprecate:deprecate,error:error,warn:warn};exports.default=index}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],23:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _slateDevLogger=require("slate-dev-logger");var _slateDevLogger2=_interopRequireDefault(_slateDevLogger);var _slate=window.Slate;var _immutable=require("immutable");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function deserialize(string){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var _options$defaultBlock=options.defaultBlock,defaultBlock=_options$defaultBlock===undefined?"line":_options$defaultBlock,_options$defaultMarks=options.defaultMarks,defaultMarks=_options$defaultMarks===undefined?[]:_options$defaultMarks,_options$toJSON=options.toJSON,toJSON=_options$toJSON===undefined?false:_options$toJSON;if(options.toRaw){_slateDevLogger2.default.deprecate("0.23.0","The `options.toRaw` argument of the `Plain` serializer is deprecated, use `options.toJSON` instead.");toJSON=options.toRaw}if(_immutable.Set.isSet(defaultMarks)){defaultMarks=defaultMarks.toArray()}defaultBlock=_slate.Node.createProperties(defaultBlock);defaultMarks=defaultMarks.map(_slate.Mark.createProperties);var json={kind:"state",document:{kind:"document",data:{},nodes:string.split("\n").map(function(line){return _extends({},defaultBlock,{kind:"block",isVoid:false,data:{},nodes:[{kind:"text",ranges:[{kind:"range",text:line,marks:defaultMarks}]}]})})}};var ret=toJSON?json:_slate.State.fromJSON(json);return ret}function serialize(state){return serializeNode(state.document)}function serializeNode(node){if(node.kind=="document"||node.kind=="block"&&_slate.Block.isBlockList(node.nodes)){return node.nodes.map(serializeNode).join("\n")}else{return node.text}}exports.default={deserialize:deserialize,serialize:serialize}},{immutable:1,"slate-dev-logger":22}],24:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slate=window.Slate;function create(name,validate){function check(isRequired,props,propName,componentName,location){var value=props[propName];if(value==null&&!isRequired)return null;if(value==null&&isRequired)return new Error("The "+location+" `"+propName+"` is marked as required in `"+componentName+"`, but it was not supplied.");if(validate(value))return null;return new Error("Invalid "+location+" `"+propName+"` supplied to `"+componentName+"`, expected a Slate `"+name+"` but received: "+value)}function propType(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return check.apply(undefined,[false].concat(args))}propType.isRequired=function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}return check.apply(undefined,[true].concat(args))};return propType}var Types={block:create("Block",function(v){return _slate.Block.isBlock(v)}),blocks:create("List<Block>",function(v){return _slate.Block.isBlockList(v)}),change:create("Change",function(v){return _slate.Change.isChange(v)}),character:create("Character",function(v){return _slate.Character.isCharacter(v)}),characters:create("List<Character>",function(v){return _slate.Character.isCharacterList(v)}),data:create("Data",function(v){return _slate.Data.isData(v)}),document:create("Document",function(v){return _slate.Document.isDocument(v)}),history:create("History",function(v){return _slate.History.isHistory(v)}),inline:create("Inline",function(v){return _slate.Inline.isInline(v)}),inlines:create("Inline",function(v){return _slate.Inline.isInlineList(v)}),mark:create("Mark",function(v){return _slate.Mark.isMark(v)}),marks:create("Set<Mark>",function(v){return _slate.Mark.isMarkSet(v)}),node:create("Node",function(v){return _slate.Node.isNode(v)}),nodes:create("List<Node>",function(v){return _slate.Node.isNodeList(v)}),range:create("Range",function(v){return _slate.Range.isRange(v)}),ranges:create("List<Range>",function(v){return _slate.Range.isRangeList(v)}),schema:create("Schema",function(v){return _slate.Schema.isSchema(v)}),selection:create("Selection",function(v){return _slate.Selection.isSelection(v)}),stack:create("Stack",function(v){return _slate.Stack.isStack(v)}),state:create("State",function(v){return _slate.State.isState(v)}),text:create("Text",function(v){return _slate.Text.isText(v)}),texts:create("List<Text>",function(v){return _slate.Text.isTextList(v)})};exports.default=Types},{}],25:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_slateBase64Serializer=require("slate-base64-serializer"),_slateBase64Serializer2=_interopRequireDefault(_slateBase64Serializer),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_react=window.React,_react2=_interopRequireDefault(_react),_slatePropTypes=require("slate-prop-types"),_slatePropTypes2=_interopRequireDefault(_slatePropTypes),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_getWindow=require("get-window"),_getWindow2=_interopRequireDefault(_getWindow),_keycode=require("keycode"),_keycode2=_interopRequireDefault(_keycode),_slate=window.Slate,_transferTypes=require("../constants/transfer-types"),_transferTypes2=_interopRequireDefault(_transferTypes),_node=require("./node"),_node2=_interopRequireDefault(_node),_extendSelection=require("../utils/extend-selection"),_extendSelection2=_interopRequireDefault(_extendSelection),_findClosestNode=require("../utils/find-closest-node"),_findClosestNode2=_interopRequireDefault(_findClosestNode),_findDropPoint=require("../utils/find-drop-point"),_findDropPoint2=_interopRequireDefault(_findDropPoint),_findNativePoint=require("../utils/find-native-point"),_findNativePoint2=_interopRequireDefault(_findNativePoint),_findPoint=require("../utils/find-point"),_findPoint2=_interopRequireDefault(_findPoint),_getHtmlFromNativePaste=require("../utils/get-html-from-native-paste"),_getHtmlFromNativePaste2=_interopRequireDefault(_getHtmlFromNativePaste),_getTransferData=require("../utils/get-transfer-data"),_getTransferData2=_interopRequireDefault(_getTransferData),_scrollToSelection=require("../utils/scroll-to-selection"),_scrollToSelection2=_interopRequireDefault(_scrollToSelection),_setTransferData=require("../utils/set-transfer-data"),_setTransferData2=_interopRequireDefault(_setTransferData),_environment=require("../constants/environment"),debug=(0,_debug2.default)("slate:content"),Content=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentDidMount=function(){n.updateSelection(),n.props.autoFocus&&n.element.focus()},n.componentDidUpdate=function(){n.updateSelection()},n.updateSelection=function(){var e=n.props.state,t=e.selection,o=(0,_getWindow2.default)(n.element),r=o.getSelection();if(r.rangeCount||!t.isBlurred){if(t.isBlurred){if(!n.isInEditor(r.anchorNode))return;return r.removeAllRanges(),n.element.blur(),void debug("updateSelection",{selection:t,native:r})}if(!t.isUnset){var i=t.anchorKey,s=t.anchorOffset,a=t.focusKey,u=t.focusOffset,p=t.isCollapsed,f=(0,_findNativePoint2.default)(i,s),l=p?f:(0,_findNativePoint2.default)(a,u);if(f&&l&&(f.node!=r.anchorNode||f.offset!=r.anchorOffset||l.node!=r.focusNode||l.offset!=r.focusOffset)){n.tmp.isSelecting=!0,r.removeAllRanges();var d=o.document.createRange();d.setStart(f.node,f.offset),r.addRange(d),p||(0,_extendSelection2.default)(r,l.node,l.offset),(0,_scrollToSelection2.default)(r),setTimeout(function(){_environment.IS_FIREFOX&&n.element.focus(),n.tmp.isSelecting=!1}),debug("updateSelection",{selection:t,native:r})}}}},n.ref=function(e){n.element=e},n.isInEditor=function(e){var t=n.element,o=3===e.nodeType?e.parentNode:e;return o.isContentEditable&&(o===t||(0,_findClosestNode2.default)(o,"[data-slate-editor]")===t)},n.onBeforeInput=function(e){if(!n.props.readOnly&&n.isInEditor(e.target)){var t={};debug("onBeforeInput",{event:e,data:t}),n.props.onBeforeInput(e,t)}},n.onBlur=function(e){if(!n.props.readOnly&&!n.tmp.isCopying&&n.isInEditor(e.target)){if((0,_getWindow2.default)(n.element).document.activeElement!=n.element){var t={};debug("onBlur",{event:e,data:t}),n.props.onBlur(e,t)}}},n.onFocus=function(e){if(!n.props.readOnly&&!n.tmp.isCopying&&n.isInEditor(e.target)){if(_environment.IS_FIREFOX&&e.target!=n.element)return void n.element.focus();var t={};debug("onFocus",{event:e,data:t}),n.props.onFocus(e,t)}},n.onCompositionStart=function(e){n.isInEditor(e.target)&&(n.tmp.isComposing=!0,n.tmp.compositions++,debug("onCompositionStart",{event:e}))},n.onCompositionEnd=function(e){if(n.isInEditor(e.target)){n.tmp.forces++;var t=n.tmp.compositions;setTimeout(function(){n.tmp.compositions>t||(n.tmp.isComposing=!1)}),debug("onCompositionEnd",{event:e})}},n.onCopy=function(e){if(n.isInEditor(e.target)){var t=(0,_getWindow2.default)(e.target);n.tmp.isCopying=!0,t.requestAnimationFrame(function(){n.tmp.isCopying=!1});var o=n.props.state,r={};r.type="fragment",r.fragment=o.fragment,debug("onCopy",{event:e,data:r}),n.props.onCopy(e,r)}},n.onCut=function(e){if(!n.props.readOnly&&n.isInEditor(e.target)){var t=(0,_getWindow2.default)(e.target);n.tmp.isCopying=!0,t.requestAnimationFrame(function(){n.tmp.isCopying=!1});var o=n.props.state,r={};r.type="fragment",r.fragment=o.fragment,debug("onCut",{event:e,data:r}),n.props.onCut(e,r)}},n.onDragEnd=function(e){e.stopPropagation(),n.tmp.isDragging=!1,n.tmp.isInternalDrag=null,debug("onDragEnd",{event:e})},n.onDragOver=function(e){e.stopPropagation(),n.tmp.isDragging||(n.tmp.isDragging=!0,n.tmp.isInternalDrag=!1,debug("onDragOver",{event:e}))},n.onDragStart=function(e){if(n.isInEditor(e.target)){n.tmp.isDragging=!0,n.tmp.isInternalDrag=!0;var t=e.nativeEvent.dataTransfer;if("node"!=(0,_getTransferData2.default)(t).type){var o=n.props.state,r=o.fragment,i=_slateBase64Serializer2.default.serializeNode(r);(0,_setTransferData2.default)(t,_transferTypes2.default.FRAGMENT,i),debug("onDragStart",{event:e})}}},n.onDrop=function(e){if(e.stopPropagation(),e.preventDefault(),!n.props.readOnly){var t=n.props.state,o=e.nativeEvent,r=o.dataTransfer,i=(0,_getTransferData2.default)(r),s=(0,_findDropPoint2.default)(e,t);if(s){i.target=_slate.Selection.create({anchorKey:s.key,anchorOffset:s.offset,focusKey:s.key,focusOffset:s.offset,isFocused:!0});try{i.effect=r.dropEffect}catch(e){i.effect=null}"fragment"!=i.type&&"node"!=i.type||(i.isInternal=n.tmp.isInternalDrag),debug("onDrop",{event:e,data:i}),n.props.onDrop(e,i)}}},n.onInput=function(e){if(!n.tmp.isComposing&&!n.props.state.isBlurred&&n.isInEditor(e.target)){debug("onInput",{event:e});var t=(0,_getWindow2.default)(e.target),o=n.props,r=o.state,i=o.editor,s=t.getSelection(),a=s.anchorNode,u=s.anchorOffset,p=(0,_findPoint2.default)(a,u,r);if(p){var f=r.document,l=r.selection,d=f.getDescendant(p.key),c=d.getRanges(),_=0,g=0,y=c.find(function(e){if((g+=e.text.length)>=p.offset)return!0;_=g}),m=y.text,v=a.textContent,h=f.getClosestBlock(d.key),C=h.getLastText(),D=c.last(),b=v.charAt(v.length-1),S=d==C,T=y==D;if(S&&T&&"\n"==b&&(v=v.slice(0,-1)),v!=m){var q=v.length-m.length,k=l.collapseToEnd().move(q),I=l.moveAnchorTo(p.key,_).moveFocusTo(p.key,g);i.change(function(e){e.select(I).delete().insertText(v,y.marks).select(k)})}}}},n.onKeyDown=function(e){if(!n.props.readOnly&&n.isInEditor(e.target)){var t=e.altKey,o=e.ctrlKey,r=e.metaKey,i=e.shiftKey,s=e.which,a=(0,_keycode2.default)(s),u={};if("shift"==a&&(n.tmp.isShifting=!0),n.tmp.isComposing&&("left"==a||"right"==a||"up"==a||"down"==a))return void e.preventDefault();u.code=s,u.key=a,u.isAlt=t,u.isCmd=!!_environment.IS_MAC&&(r&&!t),u.isCtrl=o&&!t,u.isLine=!!_environment.IS_MAC&&r,u.isMeta=r,u.isMod=_environment.IS_MAC?r&&!t:o&&!t,u.isModAlt=_environment.IS_MAC?r&&t:o&&t,u.isShift=i,u.isWord=_environment.IS_MAC?t:o,
("enter"==a||"backspace"==a||"delete"==a||"b"==a&&u.isMod||"i"==a&&u.isMod||"y"==a&&u.isMod||"z"==a&&u.isMod)&&e.preventDefault(),debug("onKeyDown",{event:e,data:u}),n.props.onKeyDown(e,u)}},n.onKeyUp=function(e){var t=e.altKey,o=e.ctrlKey,r=e.metaKey,i=e.shiftKey,s=e.which,a=(0,_keycode2.default)(s),u={};"shift"==a&&(n.tmp.isShifting=!1),u.code=s,u.key=a,u.isAlt=t,u.isCmd=!!_environment.IS_MAC&&(r&&!t),u.isCtrl=o&&!t,u.isLine=!!_environment.IS_MAC&&r,u.isMeta=r,u.isMod=_environment.IS_MAC?r&&!t:o&&!t,u.isModAlt=_environment.IS_MAC?r&&t:o&&t,u.isShift=i,u.isWord=_environment.IS_MAC?t:o,debug("onKeyUp",{event:e,data:u}),n.props.onKeyUp(e,u)},n.onPaste=function(e){if(!n.props.readOnly&&n.isInEditor(e.target)){var t=(0,_getTransferData2.default)(e.clipboardData);t.isShift=!!n.tmp.isShifting,debug("onPaste",{event:e,data:t}),_environment.IS_IE?(0,_getHtmlFromNativePaste2.default)(e.target,function(o){n.props.onPaste(e,void 0===o?t:_extends({},t,{html:o,type:"html"}))}):(e.preventDefault(),n.props.onPaste(e,t))}},n.onSelect=function(e){if(!n.props.readOnly&&!n.tmp.isCopying&&!n.tmp.isComposing&&!n.tmp.isSelecting&&n.isInEditor(e.target)){var t=(0,_getWindow2.default)(e.target),o=n.props.state,r=o.document,i=o.selection,s=t.getSelection(),a={};if(s.rangeCount){var u=s.anchorNode,p=s.anchorOffset,f=s.focusNode,l=s.focusOffset,d=(0,_findPoint2.default)(u,p,o),c=(0,_findPoint2.default)(f,l,o);if(!d||!c)return;if(d.key==i.anchorKey&&d.offset==i.anchorOffset&&c.key==i.focusKey&&c.offset==i.focusOffset&&i.isFocused)return void n.updateSelection();var _={anchorKey:d.key,anchorOffset:d.offset,focusKey:c.key,focusOffset:c.offset,isFocused:!0,isBackward:null},g=r.getNode(d.key),y=r.getNode(c.key),m=r.getClosestInline(d.key),v=r.getClosestInline(c.key),h=r.getClosestBlock(c.key),C=r.getClosestBlock(d.key);if(C&&!C.isVoid&&0==d.offset&&h&&h.isVoid&&0!=c.offset&&(_.focusOffset=0),m&&!m.isVoid&&d.offset==g.text.length){var D=r.getClosestBlock(d.key),b=D.getNextText(d.key);b&&(_.anchorKey=b.key,_.anchorOffset=0)}if(v&&!v.isVoid&&c.offset==y.text.length){var S=r.getClosestBlock(c.key),T=S.getNextText(c.key);T&&(_.focusKey=T.key,_.focusOffset=0)}a.selection=i.merge(_).normalize(r)}else a.selection=i.set("isFocused",!1);debug("onSelect",{event:e,data:a}),n.props.onSelect(e,a)}},n.renderNode=function(e,t){var o=n.props,r=o.editor,i=o.readOnly,s=o.schema,a=o.state,u=a.document,p=a.decorations,f=u.getDecorations(s);return p&&(f=p.concat(f)),_react2.default.createElement(_node2.default,{block:null,editor:r,decorations:f,isSelected:t,key:e.key,node:e,parent:u,readOnly:i,schema:s,state:a})},n.tmp={},n.tmp.compositions=0,n.tmp.forces=0,n}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.readOnly,r=t.state,i=t.tabIndex,s=t.role,a=t.tagName,u=a,p=r.document,f=r.selection,l=p.getSelectionIndexes(f,f.isFocused),d=p.nodes.toArray().map(function(t,n){var o=!!l&&l.start<=n&&n<l.end;return e.renderNode(t,o)}),c=_extends({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},o?{}:{WebkitUserModify:"read-write-plaintext-only"},t.style),_=!_environment.IS_FIREFOX&&t.spellCheck;return debug("render",{props:t}),_react2.default.createElement(u,{"data-slate-editor":!0,key:this.tmp.forces,ref:this.ref,"data-key":p.key,contentEditable:!o||null,suppressContentEditableWarning:!0,className:n,onBeforeInput:this.onBeforeInput,onBlur:this.onBlur,onFocus:this.onFocus,onCompositionEnd:this.onCompositionEnd,onCompositionStart:this.onCompositionStart,onCopy:this.onCopy,onCut:this.onCut,onDragEnd:this.onDragEnd,onDragOver:this.onDragOver,onDragStart:this.onDragStart,onDrop:this.onDrop,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onPaste:this.onPaste,onSelect:this.onSelect,autoCorrect:t.autoCorrect?"on":"off",spellCheck:_,style:c,role:o?null:s||"textbox",tabIndex:i,"data-gramm":!1},d,this.props.children)}}]),t}(_react2.default.Component);Content.propTypes={autoCorrect:_propTypes2.default.bool.isRequired,autoFocus:_propTypes2.default.bool.isRequired,children:_propTypes2.default.array.isRequired,className:_propTypes2.default.string,editor:_propTypes2.default.object.isRequired,onBeforeInput:_propTypes2.default.func.isRequired,onBlur:_propTypes2.default.func.isRequired,onCopy:_propTypes2.default.func.isRequired,onCut:_propTypes2.default.func.isRequired,onDrop:_propTypes2.default.func.isRequired,onFocus:_propTypes2.default.func.isRequired,onKeyDown:_propTypes2.default.func.isRequired,onKeyUp:_propTypes2.default.func.isRequired,onPaste:_propTypes2.default.func.isRequired,onSelect:_propTypes2.default.func.isRequired,readOnly:_propTypes2.default.bool.isRequired,role:_propTypes2.default.string,schema:_slatePropTypes2.default.schema.isRequired,spellCheck:_propTypes2.default.bool.isRequired,state:_slatePropTypes2.default.state.isRequired,style:_propTypes2.default.object,tabIndex:_propTypes2.default.number,tagName:_propTypes2.default.string},Content.defaultProps={style:{},tagName:"div"},exports.default=Content},{"../constants/environment":32,"../constants/transfer-types":33,"../utils/extend-selection":36,"../utils/find-closest-node":37,"../utils/find-drop-point":39,"../utils/find-native-point":40,"../utils/find-point":41,"../utils/get-html-from-native-paste":42,"../utils/get-transfer-data":43,"../utils/scroll-to-selection":47,"../utils/set-transfer-data":48,"./node":28,debug:2,"get-window":5,keycode:9,"prop-types":16,"slate-base64-serializer":21,"slate-prop-types":24}],26:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _objectWithoutProperties(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function resolvePlugins(e){var t=(e.state,e.onChange,e.plugins),r=void 0===t?[]:t,o=_objectWithoutProperties(e,["state","onChange","plugins"]),n=(0,_core2.default)(e);return[o].concat(_toConsumableArray(r),[n])}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_reactPortal=require("react-portal"),_reactPortal2=_interopRequireDefault(_reactPortal),_react=window.React,_react2=_interopRequireDefault(_react),_slatePropTypes=require("slate-prop-types"),_slatePropTypes2=_interopRequireDefault(_slatePropTypes),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_slateDevLogger=require("slate-dev-logger"),_slateDevLogger2=_interopRequireDefault(_slateDevLogger),_slate=window.Slate,_core=require("../plugins/core"),_core2=_interopRequireDefault(_core),_noop=require("../utils/noop"),_noop2=_interopRequireDefault(_noop),debug=(0,_debug2.default)("slate:editor"),EVENT_HANDLERS=["onBeforeInput","onBlur","onFocus","onCopy","onCut","onDrop","onKeyDown","onKeyUp","onPaste","onSelect"],PLUGINS_PROPS=[].concat(EVENT_HANDLERS,["placeholder","placeholderClassName","placeholderStyle","plugins","schema"]),Editor=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));_initialiseProps.call(r),r.state={},r.tmp={};var o=resolvePlugins(e),n=_slate.Stack.create({plugins:o});r.state.stack=n;var a=e.state.change();n.onBeforeChange(a,r);var s=a.state;r.queueChange(a),r.cacheState(s),r.state.state=s;for(var u=0;u<EVENT_HANDLERS.length;u++)!function(e){var t=EVENT_HANDLERS[e];r[t]=function(){for(var e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];var a=r.state.stack,s=r.state.state.change();a[t].apply(a,[s,r].concat(o)),r.onChange(s)}}(u);return e.onDocumentChange&&_slateDevLogger2.default.deprecate("0.22.10","The `onDocumentChange` prop is deprecated because it led to confusing UX issues, see https://github.com/ianstormtaylor/slate/issues/614#issuecomment-327868679"),e.onSelectionChange&&_slateDevLogger2.default.deprecate("0.22.10","The `onSelectionChange` prop is deprecated because it led to confusing UX issues, see https://github.com/ianstormtaylor/slate/issues/614#issuecomment-327868679"),r}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props,t=this.state,r=t.stack,o=r.renderPortal(t.state,this).map(function(e,t){return _react2.default.createElement(_reactPortal2.default,{key:t,isOpened:!0},e)});return debug("render",{props:e,state:t}),r.render(t.state,this,_extends({},e,{children:o}))}}]),t}(_react2.default.Component);Editor.propTypes={autoCorrect:_propTypes2.default.bool,autoFocus:_propTypes2.default.bool,className:_propTypes2.default.string,onBeforeChange:_propTypes2.default.func,onChange:_propTypes2.default.func,placeholder:_propTypes2.default.any,placeholderClassName:_propTypes2.default.string,placeholderStyle:_propTypes2.default.object,plugins:_propTypes2.default.array,readOnly:_propTypes2.default.bool,role:_propTypes2.default.string,schema:_propTypes2.default.object,spellCheck:_propTypes2.default.bool,state:_slatePropTypes2.default.state.isRequired,style:_propTypes2.default.object,tabIndex:_propTypes2.default.number},Editor.defaultProps={autoFocus:!1,autoCorrect:!0,onChange:_noop2.default,plugins:[],readOnly:!1,schema:{},spellCheck:!0};for(var _initialiseProps=function(){var e=this;this.componentWillReceiveProps=function(t){for(var r=e.state.stack,o=0;o<PLUGINS_PROPS.length;o++){var n=PLUGINS_PROPS[o];if(t[n]!=e.props[n]){var a=resolvePlugins(t);r=_slate.Stack.create({plugins:a}),e.setState({stack:r})}}var s=t.state.change();r.onBeforeChange(s,e);var u=s.state;e.queueChange(s),e.cacheState(u),e.setState({state:u})},this.componentDidMount=function(){e.flushChange()},this.componentDidUpdate=function(){e.flushChange()},this.cacheState=function(t){e.tmp.document=t.document,e.tmp.selection=t.selection},this.queueChange=function(t){t.operations.length&&(debug("queueChange",{change:t}),e.tmp.change=t)},this.flushChange=function(){var t=e.tmp.change;t&&(debug("flushChange",{change:t}),e.props.onChange(t),delete e.tmp.change)},this.blur=function(){e.change(function(e){return e.blur()})},this.focus=function(){e.change(function(e){return e.focus()})},this.getSchema=function(){return e.state.stack.schema},this.getState=function(){return e.state.state},this.change=function(t){var r=e.state.state.change();t(r),debug("change",{change:r}),e.onChange(r)},this.onChange=function(t){if(_slate.State.isState(t))throw new Error("As of slate@0.22.0 the `editor.onChange` method must be passed a `Change` object not a `State` object.");var r=e.state.stack;r.onBeforeChange(t,e),r.onChange(t,e);var o=t.state,n=e.tmp,a=n.document,s=n.selection,u=e.props,p=u.onChange,c=u.onDocumentChange,i=u.onSelectionChange;o!=e.state.state&&(debug("onChange",{change:t}),p(t),c&&o.document!=a&&c(o.document,t),i&&o.selection!=s&&i(o.selection,t))}},i=0;i<EVENT_HANDLERS.length;i++){var property=EVENT_HANDLERS[i];Editor.propTypes[property]=_propTypes2.default.func}exports.default=Editor},{"../plugins/core":35,"../utils/noop":44,debug:2,"prop-types":16,"react-portal":19,"slate-dev-logger":22,"slate-prop-types":24}],27:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_react=window.React,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_slatePropTypes=require("slate-prop-types"),_slatePropTypes2=_interopRequireDefault(_slatePropTypes),_offsetKey=require("../utils/offset-key"),_offsetKey2=_interopRequireDefault(_offsetKey),_environment=require("../constants/environment"),debug=(0,_debug2.default)("slate:leaf"),Leaf=function(e){function t(){var e,r,n,a;_classCallCheck(this,t);for(var o=arguments.length,s=Array(o),i=0;i<o;i++)s[i]=arguments[i];return r=n=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),_initialiseProps.call(n),a=r,_possibleConstructorReturn(n,a)}return _inherits(t,e),_createClass(t,[{key:"shouldComponentUpdate",value:function(e){return e.index!=this.props.index||e.marks!=this.props.marks||e.schema!=this.props.schema||e.text!=this.props.text||e.parent!=this.props.parent}},{key:"render",value:function(){var e=this.props,t=e.node,r=e.index,n=_offsetKey2.default.stringify({key:t.key,index:r});return this.debug("render",{props:e}),_react2.default.createElement("span",{"data-offset-key":n},this.renderMarks(e))}},{key:"renderMarks",value:function(e){var t=e.marks,r=e.schema,n=e.node,a=e.offset,o=e.text,s=e.state,i=e.editor,u=this.renderText(e);return t.reduce(function(e,u){var p=u.getComponent(r);return p?_react2.default.createElement(p,{editor:i,mark:u,marks:t,node:n,offset:a,schema:r,state:s,text:o},e):e},u)}},{key:"renderText",value:function(e){var t=e.block,r=e.node,n=e.parent,a=e.text,o=e.index,s=e.ranges;if(""==a&&"block"==n.kind&&""==n.text)return _react2.default.createElement("br",null);if(""==a){var i=_environment.IS_FIREFOX?"":"";return _react2.default.createElement("span",{"data-slate-zero-width":!0},i)}var u=t.getLastText(),p=a.charAt(a.length-1),l=r==u,f=o==s.size-1;return l&&f&&"\n"==p?a+"\n":a}}]),t}(_react2.default.Component);Leaf.propTypes={block:_slatePropTypes2.default.block.isRequired,editor:_propTypes2.default.object.isRequired,index:_propTypes2.default.number.isRequired,marks:_slatePropTypes2.default.marks.isRequired,node:_slatePropTypes2.default.node.isRequired,offset:_propTypes2.default.number.isRequired,parent:_slatePropTypes2.default.node.isRequired,ranges:_slatePropTypes2.default.ranges.isRequired,schema:_slatePropTypes2.default.schema.isRequired,state:_slatePropTypes2.default.state.isRequired,text:_propTypes2.default.string.isRequired};var _initialiseProps=function(){var e=this;this.debug=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];debug.apply(void 0,[t,e.props.node.key+"-"+e.props.index].concat(n))}};exports.default=Leaf},{"../constants/environment":32,"../utils/offset-key":46,debug:2,"prop-types":16,"slate-prop-types":24}],28:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_reactImmutableProptypes=require("react-immutable-proptypes"),_reactImmutableProptypes2=_interopRequireDefault(_reactImmutableProptypes),_react=window.React,_react2=_interopRequireDefault(_react),_slatePropTypes=require("slate-prop-types"),_slatePropTypes2=_interopRequireDefault(_slatePropTypes),_slateDevLogger=require("slate-dev-logger"),_slateDevLogger2=_interopRequireDefault(_slateDevLogger),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_void=require("./void"),_void2=_interopRequireDefault(_void),_text=require("./text"),_text2=_interopRequireDefault(_text),debug=(0,_debug2.default)("slate:node"),Node=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));_initialiseProps.call(r);var o=e.node,n=e.schema;return r.state={},r.state.Component=o.getComponent(n),r}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this,t=this.props;this.debug("render",{props:t});var r=t.editor,o=t.isSelected,n=t.node,a=t.parent,s=t.readOnly,i=t.state,p=this.state.Component,l=i.selection,u=n.getSelectionIndexes(l,o),d=n.nodes.toArray().map(function(t,r){var o=!!u&&u.start<=r&&r<u.end;return e.renderNode(t,o)}),c={"data-key":n.key};if("block"==n.kind&&"block"!=n.nodes.first().kind){"rtl"==n.getTextDirection()&&(c.dir="rtl")}var f=_react2.default.createElement(p,{attributes:c,editor:r,isSelected:o,key:n.key,node:n,parent:a,readOnly:s,state:i},d);return n.isVoid?_react2.default.createElement(_void2.default,this.props,f):f}}]),t}(_react2.default.Component);Node.propTypes={block:_slatePropTypes2.default.block,decorations:_reactImmutableProptypes2.default.list.isRequired,editor:_propTypes2.default.object.isRequired,isSelected:_propTypes2.default.bool.isRequired,node:_slatePropTypes2.default.node.isRequired,parent:_slatePropTypes2.default.node.isRequired,readOnly:_propTypes2.default.bool.isRequired,schema:_slatePropTypes2.default.schema.isRequired,state:_slatePropTypes2.default.state.isRequired};var _initialiseProps=function(){var e=this;this.debug=function(t){for(var r=arguments.length,o=Array(r>1?r-1:0),n=1;n<r;n++)o[n-1]=arguments[n];var a=e.props.node,s=a.key,i=a.type;debug.apply(void 0,[t,s+" ("+i+")"].concat(o))},this.componentWillReceiveProps=function(t){if(t.node!=e.props.node){var r=t.node.getComponent(t.schema);e.setState({Component:r})}},this.shouldComponentUpdate=function(t){var r=e.props,o=e.state.Component,n=t,a=r;if(o&&o.suppressShouldComponentUpdate)return _slateDevLogger2.default.deprecate("2.2.0","The `suppressShouldComponentUpdate` property is deprecated because it led to an important performance loss, use `shouldNodeComponentUpdate` instead."),!0;if(o&&o.shouldNodeComponentUpdate){var s=o.shouldNodeComponentUpdate(a,n);if(s)return!0;!1===s&&_slateDevLogger2.default.warn("Returning false in `shouldNodeComponentUpdate` does not disable Slate's internal `shouldComponentUpdate` logic. If you want to prevent updates, use React's `shouldComponentUpdate` instead.")}return n.readOnly!=a.readOnly||(n.node!=a.node||(!(!n.isSelected&&!a.isSelected)||!n.decorations.equals(a.decorations)))},this.renderNode=function(t,r){var o=e.props,n=o.block,a=o.decorations,s=o.editor,i=o.node,p=o.readOnly,l=o.schema,u=o.state,d="text"===t.kind?_text2.default:Node,c=a.concat(i.getDecorations(l));return _react2.default.createElement(d,{block:"block"==i.kind?i:n,decorations:c,editor:s,isSelected:r,key:t.key,node:t,parent:i,readOnly:p,schema:l,state:u})}};exports.default=Node},{"./text":30,"./void":31,debug:2,"prop-types":16,"react-immutable-proptypes":18,"slate-dev-logger":22,"slate-prop-types":24}],29:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_react=window.React,_react2=_interopRequireDefault(_react),_slatePropTypes=require("slate-prop-types"),_slatePropTypes2=_interopRequireDefault(_slatePropTypes),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),Placeholder=function(e){function t(){var e,r,o,n;_classCallCheck(this,t);for(var s=arguments.length,p=Array(s),l=0;l<s;l++)p[l]=arguments[l];return r=o=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(p))),o.shouldComponentUpdate=function(e,t){return e.children!=o.props.children||e.className!=o.props.className||e.firstOnly!=o.props.firstOnly||e.parent!=o.props.parent||e.node!=o.props.node||e.style!=o.props.style},o.isVisible=function(){var e=o.props,t=e.firstOnly,r=e.node,n=e.parent;return!r.text&&(!t||!(n.nodes.size>1)&&n.nodes.first()===r)},n=r,_possibleConstructorReturn(o,n)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){if(!this.isVisible())return null;var e=this.props,t=e.children,r=e.className,o=this.props.style;"string"==typeof t&&null==o&&null==r?o={opacity:"0.333"}:null==o&&(o={});var n=_extends({position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",pointerEvents:"none"},o);return _react2.default.createElement("span",{contentEditable:!1,className:r,style:n},t)}}]),t}(_react2.default.Component);Placeholder.propTypes={children:_propTypes2.default.any.isRequired,className:_propTypes2.default.string,firstOnly:_propTypes2.default.bool,node:_slatePropTypes2.default.node.isRequired,parent:_slatePropTypes2.default.node,state:_slatePropTypes2.default.state.isRequired,style:_propTypes2.default.object},Placeholder.defaultProps={firstOnly:!0},exports.default=Placeholder},{"prop-types":16,"slate-prop-types":24}],30:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_reactImmutableProptypes=require("react-immutable-proptypes"),_reactImmutableProptypes2=_interopRequireDefault(_reactImmutableProptypes),_react=window.React,_react2=_interopRequireDefault(_react),_slatePropTypes=require("slate-prop-types"),_slatePropTypes2=_interopRequireDefault(_slatePropTypes),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_leaf=require("./leaf"),_leaf2=_interopRequireDefault(_leaf),debug=(0,_debug2.default)("slate:node"),Text=function(e){function t(){var e,r,a,o;_classCallCheck(this,t);for(var n=arguments.length,s=Array(n),u=0;u<n;u++)s[u]=arguments[u];return r=a=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),_initialiseProps.call(a),o=r,_possibleConstructorReturn(a,o)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this,t=this.props;this.debug("render",{props:t});var r=t.decorations,a=t.node,o=t.state,n=t.style,s=o.document,u=a.key,i=r.filter(function(e){var t=e.startKey,r=e.endKey;if(t==u||r==u)return!0;var a=s.areDescendantsSorted(t,u),o=s.areDescendantsSorted(u,r);return a&&o}),p=a.getRanges(i),l=0,c=p.map(function(t,r){var a=e.renderLeaf(p,t,r,l);return l+=t.text.length,a});return _react2.default.createElement("span",{"data-key":u,style:n},c)}}]),t}(_react2.default.Component);Text.propTypes={block:_slatePropTypes2.default.block,decorations:_reactImmutableProptypes2.default.list.isRequired,editor:_propTypes2.default.object.isRequired,node:_slatePropTypes2.default.node.isRequired,parent:_slatePropTypes2.default.node.isRequired,schema:_slatePropTypes2.default.schema.isRequired,state:_slatePropTypes2.default.state.isRequired,style:_propTypes2.default.object},Text.defaultProps={style:null};var _initialiseProps=function(){var e=this;this.debug=function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];var n=e.props.node,s=n.key;debug.apply(void 0,[t,s+" (text)"].concat(a))},this.shouldComponentUpdate=function(t){var r=e.props,a=t,o=r;if(a.node!=o.node)return!0;if("block"==a.parent.kind){var n=o.parent.nodes.last(),s=a.parent.nodes.last();if(o.node==n&&a.node!=s)return!0}return!a.decorations.equals(o.decorations)},this.renderLeaf=function(t,r,a,o){var n=e.props,s=n.block,u=n.node,i=n.parent,p=n.schema,l=n.state,c=n.editor,f=r.text,d=r.marks;return _react2.default.createElement(_leaf2.default,{key:u.key+"-"+a,block:s,editor:c,index:a,marks:d,node:u,offset:o,parent:i,ranges:t,schema:p,state:l,text:f})}};exports.default=Text},{"./leaf":27,debug:2,"prop-types":16,"react-immutable-proptypes":18,"slate-prop-types":24}],31:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_slateBase64Serializer=require("slate-base64-serializer"),_slateBase64Serializer2=_interopRequireDefault(_slateBase64Serializer),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_react=window.React,_react2=_interopRequireDefault(_react),_slatePropTypes=require("slate-prop-types"),_slatePropTypes2=_interopRequireDefault(_slatePropTypes),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_setTransferData=require("../utils/set-transfer-data"),_setTransferData2=_interopRequireDefault(_setTransferData),_text=require("./text"),_text2=_interopRequireDefault(_text),_transferTypes=require("../constants/transfer-types"),_transferTypes2=_interopRequireDefault(_transferTypes),debug=(0,_debug2.default)("slate:void"),Void=function(e){function t(){var e,r,a,n;_classCallCheck(this,t);for(var o=arguments.length,s=Array(o),i=0;i<o;i++)s[i]=arguments[i];return r=a=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),_initialiseProps.call(a),n=r,_possibleConstructorReturn(a,n)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props,t=e.children,r=e.node,a=e.readOnly,n="block"==r.kind?"div":"span",o={height:"0",color:"transparent"};return this.debug("render",{props:e}),_react2.default.createElement(n,{"data-slate-void":!0,"data-key":r.key,onClick:this.onClick,onDragOver:this.onDragOver,onDragEnter:this.onDragEnter,onDragStart:this.onDragStart},!a&&_react2.default.createElement(n,{style:o},this.renderText()),_react2.default.createElement(n,{contentEditable:!!a&&null},t))}}]),t}(_react2.default.Component);Void.propTypes={block:_slatePropTypes2.default.block,children:_propTypes2.default.any.isRequired,editor:_propTypes2.default.object.isRequired,node:_slatePropTypes2.default.node.isRequired,parent:_slatePropTypes2.default.node.isRequired,readOnly:_propTypes2.default.bool.isRequired,schema:_slatePropTypes2.default.schema.isRequired,state:_slatePropTypes2.default.state.isRequired};var _initialiseProps=function(){var e=this;this.debug=function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];var o=e.props.node,s=o.key,i=o.type,l=s+" ("+i+")";debug.apply(void 0,[t,""+l].concat(a))},this.onClick=function(t){if(!e.props.readOnly){e.debug("onClick",{event:t});var r=e.props,a=r.node;r.editor.change(function(e){e.collapseToEndOf(a).focus()})}},this.onDragEnter=function(t){e.props.readOnly||t.preventDefault()},this.onDragOver=function(t){e.props.readOnly||t.preventDefault()},this.onDragStart=function(t){var r=e.props.node,a=_slateBase64Serializer2.default.serializeNode(r,{preserveKeys:!0}),n=t.nativeEvent.dataTransfer;(0,_setTransferData2.default)(n,_transferTypes2.default.NODE,a),e.debug("onDragStart",t)},this.renderText=function(){var t=e.props,r=t.block,a=t.decorations,n=t.isSelected,o=t.node,s=t.readOnly,i=t.schema,l=t.state,u=t.editor,p=o.getFirstText();return _react2.default.createElement(_text2.default,{block:"block"==o.kind?o:r,decorations:a,editor:u,isSelected:n,key:p.key,node:p,parent:o,readOnly:s,schema:i,state:l})}};exports.default=Void},{"../constants/transfer-types":33,"../utils/set-transfer-data":48,"./text":30,debug:2,"prop-types":16,"slate-base64-serializer":21,"slate-prop-types":24
}],32:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.IS_WINDOWS=exports.IS_MAC=exports.IS_IE=exports.IS_SAFARI=exports.IS_FIREFOX=exports.IS_CHROME=void 0;var _slicedToArray=function(){function e(e,r){var i=[],o=!0,t=!1,S=void 0;try{for(var s,_=e[Symbol.iterator]();!(o=(s=_.next()).done)&&(i.push(s.value),!r||i.length!==r);o=!0);}catch(e){t=!0,S=e}finally{try{!o&&_.return&&_.return()}finally{if(t)throw S}}return i}return function(r,i){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_isInBrowser=require("is-in-browser"),_isInBrowser2=_interopRequireDefault(_isInBrowser),BROWSER_RULES=[["edge",/Edge\/([0-9\._]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["android",/Android\s([0-9\.]+)/],["safari",/Version\/([0-9\._]+).*Safari/]],OS_RULES=[["macos",/mac os x/i],["ios",/os ([\.\_\d]+) like mac os/i],["android",/android/i],["firefoxos",/mozilla\/[a-z\.\_\d]+ \((?:mobile)|(?:tablet)/i],["windows",/windows\s*(?:nt)?\s*([\.\_\d]+)/i]],BROWSER=void 0,OS=void 0;if(_isInBrowser2.default){for(var userAgent=window.navigator.userAgent,i=0;i<BROWSER_RULES.length;i++){var _BROWSER_RULES$i=_slicedToArray(BROWSER_RULES[i],2),name=_BROWSER_RULES$i[0],regexp=_BROWSER_RULES$i[1];if(regexp.test(userAgent)){BROWSER=name;break}}for(var _i=0;_i<OS_RULES.length;_i++){var _OS_RULES$_i=_slicedToArray(OS_RULES[_i],2),name=_OS_RULES$_i[0],regexp=_OS_RULES$_i[1];if(regexp.test(userAgent)){OS=name;break}}}var IS_CHROME=exports.IS_CHROME="chrome"===BROWSER,IS_FIREFOX=exports.IS_FIREFOX="firefox"===BROWSER,IS_SAFARI=exports.IS_SAFARI="safari"===BROWSER,IS_IE=exports.IS_IE="ie"===BROWSER,IS_MAC=exports.IS_MAC="macos"===OS,IS_WINDOWS=exports.IS_WINDOWS="windows"===OS},{"is-in-browser":7}],33:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var TYPES={FRAGMENT:"application/x-slate-fragment",NODE:"application/x-slate-node"};exports.default=TYPES},{}],34:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.findDOMNode=exports.Placeholder=exports.Editor=void 0;var _editor=require("./components/editor"),_editor2=_interopRequireDefault(_editor),_placeholder=require("./components/placeholder"),_placeholder2=_interopRequireDefault(_placeholder),_findDomNode=require("./utils/find-dom-node"),_findDomNode2=_interopRequireDefault(_findDomNode);exports.Editor=_editor2.default,exports.Placeholder=_placeholder2.default,exports.findDOMNode=_findDomNode2.default,exports.default={Editor:_editor2.default,Placeholder:_placeholder2.default,findDOMNode:_findDomNode2.default}},{"./components/editor":26,"./components/placeholder":29,"./utils/find-dom-node":38}],35:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Plugin(){function e(e,t){var n=e.state,r=t.getSchema(),o=t.getState();o&&n.document==o.document||(e.normalize(_slate.coreSchema),e.normalize(r),debug("onBeforeChange"))}function t(e,t,n){debug("onBeforeInput",{data:t}),e.preventDefault();var r=n.state,o=r.selection,a=o.anchorKey,i=o.anchorOffset,s=o.focusKey,l=o.focusOffset,d=(0,_getWindow2.default)(e.target),c=d.getSelection(),u=(0,_findPoint2.default)(c.anchorNode,c.anchorOffset,r),f=(0,_findPoint2.default)(c.focusNode,c.focusOffset,r);u&&f&&(a!=u.key||i!=u.offset||s!=f.key||l!=f.offset)&&n.select({anchorKey:u.key,anchorOffset:u.offset,focusKey:f.key,focusOffset:f.offset}),n.insertText(e.data)}function n(e,t,n){debug("onBlur",{data:t}),n.blur()}function r(e,t,n){debug("onCopy",t),a(e,t,n)}function o(e,t,n,r){debug("onCut",t),a(e,t,n),(0,_getWindow2.default)(e.target).requestAnimationFrame(function(){r.change(function(e){return e.delete()})})}function a(e,t,n){var r=(0,_getWindow2.default)(e.target),o=r.getSelection(),a=n.state,i=a.startKey,s=a.endKey,l=a.startText,d=a.endBlock,c=a.endInline,u=d&&d.isVoid,f=c&&c.isVoid,p=u||f;if(!o.isCollapsed||p){var g=t.fragment,m=_slateBase64Serializer2.default.serializeNode(g),_=o.getRangeAt(0),v=_.cloneContents(),h=v.childNodes[0];if(p){var y=_.cloneRange(),C=(0,_findDomNode2.default)(u?d:c);y.setEndAfter(C),v=y.cloneContents(),h=v.childNodes[v.childNodes.length-1].firstChild}if((_environment.IS_CHROME||_environment.IS_SAFARI)&&!p&&i===s){if(0!==l.characters.slice(a.selection.anchorOffset,a.selection.focusOffset).filter(function(e){return 0!==e.marks.size}).size){var S=_.cloneRange(),k=(0,_findDomNode2.default)(l);S.setStartBefore(k),v=S.cloneContents(),h=v.childNodes[v.childNodes.length-1].firstChild}}if([].slice.call(v.querySelectorAll("[data-slate-zero-width]")).forEach(function(e){return e.parentNode.removeChild(e)}),_environment.IS_CHROME||_environment.IS_SAFARI){[].slice.call(v.querySelectorAll('[contenteditable="false"]')).forEach(function(e){return e.removeAttribute("contenteditable")})}if(3==h.nodeType){var b=r.document.createElement("span");b.style.whiteSpace="pre",b.appendChild(h),v.appendChild(b),h=b}h.setAttribute("data-slate-fragment",m);var O=r.document.querySelector("body"),x=r.document.createElement("div");x.setAttribute("contenteditable",!0),x.style.position="absolute",x.style.left="-9999px",x.appendChild(v),O.appendChild(x);var B=r.document.createRange();B.selectNodeContents(x),o.removeAllRanges(),o.addRange(B),r.requestAnimationFrame(function(){O.removeChild(x),o.removeAllRanges(),o.addRange(_)})}}function i(e,t,n){switch(debug("onDrop",{data:t}),t.type){case"text":case"html":return d(e,t,n);case"fragment":return l(e,t,n);case"node":return s(e,t,n)}}function s(e,t,n){debug("onDropNode",{data:t});var r=n.state,o=r.selection,a=t.node,i=t.target,s=t.isInternal;s&&o.endKey==i.endKey&&o.endOffset<i.endOffset&&(i=i.move(o.startKey==o.endKey?0-o.endOffset+o.startOffset:0-o.endOffset)),s&&n.delete(),_slate.Block.isBlock(a)&&n.select(i).insertBlock(a).removeNodeByKey(a.key),_slate.Inline.isInline(a)&&n.select(i).insertInline(a).removeNodeByKey(a.key)}function l(e,t,n){debug("onDropFragment",{data:t});var r=n.state,o=r.selection,a=t.fragment,i=t.target,s=t.isInternal;s&&o.endKey==i.endKey&&o.endOffset<i.endOffset&&(i=i.move(o.startKey==o.endKey?0-o.endOffset+o.startOffset:0-o.endOffset)),s&&n.delete(),n.select(i).insertFragment(a)}function d(e,t,n){debug("onDropText",{data:t});var r=n.state,o=r.document,a=t.text,i=t.target,s=i.anchorKey;n.select(i);var l=o.hasVoidParent(s);if(l){for(var d=o.getNode(s);l&&(d=o.getNextText(d.key));)l=o.hasVoidParent(d.key);d&&n.collapseToStartOf(d)}a.split("\n").forEach(function(e,t){t>0&&n.splitBlock(),n.insertText(e)})}function c(e,t,n){switch(debug("onKeyDown",{data:t}),t.key){case"enter":return u(e,t,n);case"backspace":return f(e,t,n);case"delete":return p(e,t,n);case"left":return g(e,t,n);case"right":return m(e,t,n);case"up":return _(e,t,n);case"down":return v(e,t,n);case"d":return h(e,t,n);case"h":return y(e,t,n);case"k":return C(e,t,n);case"y":return S(e,t,n);case"z":return k(e,t,n)}}function u(e,t,n){var r=n.state,o=r.document,a=r.startKey;if(o.hasVoidParent(a)){var i=o.getNextText(a);if(!i)return;return void n.collapseToStartOf(i)}n.splitBlock()}function f(e,t,n){var r="Char";t.isWord&&(r="Word"),t.isLine&&(r="Line"),n["delete"+r+"Backward"]()}function p(e,t,n){var r="Char";t.isWord&&(r="Word"),t.isLine&&(r="Line"),n["delete"+r+"Forward"]()}function g(e,t,n){var r=n.state;if(!t.isCtrl&&!t.isAlt&&!r.isExpanded){var o=r.document,a=r.startKey,i=r.startText,s=o.hasVoidParent(a);if(""==i.text||s){e.preventDefault();var l=o.getPreviousText(a);if(!l)return;var d=r.startBlock,c=o.getClosestBlock(l.key),u=o.getClosestInline(l.key);if(c===d&&u&&!u.isVoid){var f=t.isShift?"extend":"move";return void n.collapseToEndOf(l)[f](-1)}n.collapseToEndOf(l)}}}function m(e,t,n){var r=n.state;if(!t.isCtrl&&!t.isAlt&&!r.isExpanded){var o=r.document,a=r.startKey,i=r.startText,s=o.hasVoidParent(a);if(""==i.text||s){e.preventDefault();var l=o.getNextText(a);if(!l)return;if(o.hasVoidParent(l.key))return void n.collapseToEndOf(l);var d=r.startBlock,c=o.getClosestBlock(l.key),u=o.getClosestInline(l.key);if(c==d&&u){var f=t.isShift?"extend":"move";return void n.collapseToStartOf(l)[f](1)}n.collapseToStartOf(l)}}}function _(e,t,n){if(_environment.IS_MAC&&!t.isCtrl&&t.isAlt){var r=n.state,o=r.selection,a=r.document,i=r.focusKey,s=r.focusBlock,l=t.isShift?"extendToStartOf":"collapseToStartOf",d=o.hasFocusAtStartOf(s)?a.getPreviousBlock(i):s;if(d){var c=d.getFirstText();e.preventDefault(),n[l](c)}}}function v(e,t,n){if(_environment.IS_MAC&&!t.isCtrl&&t.isAlt){var r=n.state,o=r.selection,a=r.document,i=r.focusKey,s=r.focusBlock,l=t.isShift?"extendToEndOf":"collapseToEndOf",d=o.hasFocusAtEndOf(s)?a.getNextBlock(i):s;if(d){var c=d.getLastText();e.preventDefault(),n[l](c)}}}function h(e,t,n){_environment.IS_MAC&&t.isCtrl&&(e.preventDefault(),n.deleteCharForward())}function y(e,t,n){_environment.IS_MAC&&t.isCtrl&&(e.preventDefault(),n.deleteCharBackward())}function C(e,t,n){_environment.IS_MAC&&t.isCtrl&&(e.preventDefault(),n.deleteLineForward())}function S(e,t,n){t.isMod&&n.redo()}function k(e,t,n){t.isMod&&n[t.isShift?"redo":"undo"]()}function b(e,t,n){switch(debug("onPaste",{data:t}),t.type){case"fragment":return O(e,t,n);case"text":case"html":return x(e,t,n)}}function O(e,t,n){debug("onPasteFragment",{data:t}),n.insertFragment(t.fragment)}function x(e,t,n){debug("onPasteText",{data:t});var r=n.state,o=r.document,a=r.selection,i=r.startBlock;if(!i.isVoid){var s=t.text,l=i,d=o.getMarksAtRange(a.collapseToStart()),c=_slatePlainSerializer2.default.deserialize(s,{defaultBlock:l,defaultMarks:d}).document;n.insertFragment(c)}}function B(e,t,n){debug("onSelect",{data:t}),n.select(t.selection)}function D(e,t,n){return _react2.default.createElement(_content2.default,{autoCorrect:e.autoCorrect,autoFocus:e.autoFocus,className:e.className,children:e.children,editor:n,onBeforeInput:n.onBeforeInput,onBlur:n.onBlur,onFocus:n.onFocus,onCopy:n.onCopy,onCut:n.onCut,onDrop:n.onDrop,onKeyDown:n.onKeyDown,onKeyUp:n.onKeyUp,onPaste:n.onPaste,onSelect:n.onSelect,readOnly:e.readOnly,role:e.role,schema:n.getSchema(),spellCheck:e.spellCheck,state:t,style:e.style,tabIndex:e.tabIndex,tagName:e.tagName})}var N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},K=N.placeholder,A=N.placeholderClassName,P=N.placeholderStyle;return{onBeforeChange:e,onBeforeInput:t,onBlur:n,onCopy:r,onCut:o,onDrop:i,onKeyDown:c,onPaste:b,onSelect:B,render:D,schema:{rules:[{match:function(e){return"block"==e.kind},render:function(e){return _react2.default.createElement("div",_extends({},e.attributes,{style:{position:"relative"}}),e.children,K?_react2.default.createElement(_placeholder2.default,{className:A,node:e.node,parent:e.state.document,state:e.state,style:P},K):null)}},{match:function(e){return"inline"==e.kind},render:function(e){return _react2.default.createElement("span",_extends({},e.attributes,{style:{position:"relative"}}),e.children)}}]}}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_slateBase64Serializer=require("slate-base64-serializer"),_slateBase64Serializer2=_interopRequireDefault(_slateBase64Serializer),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_slatePlainSerializer=require("slate-plain-serializer"),_slatePlainSerializer2=_interopRequireDefault(_slatePlainSerializer),_react=window.React,_react2=_interopRequireDefault(_react),_getWindow=require("get-window"),_getWindow2=_interopRequireDefault(_getWindow),_slate=window.Slate,_content=require("../components/content"),_content2=_interopRequireDefault(_content),_placeholder=require("../components/placeholder"),_placeholder2=_interopRequireDefault(_placeholder),_findDomNode=require("../utils/find-dom-node"),_findDomNode2=_interopRequireDefault(_findDomNode),_findPoint=require("../utils/find-point"),_findPoint2=_interopRequireDefault(_findPoint),_environment=require("../constants/environment"),debug=(0,_debug2.default)("slate:core");exports.default=Plugin},{"../components/content":25,"../components/placeholder":29,"../constants/environment":32,"../utils/find-dom-node":38,"../utils/find-point":41,debug:2,"get-window":5,"slate-base64-serializer":21,"slate-plain-serializer":23}],36:[function(require,module,exports){"use strict";function extendSelection(e,t,n){if("function"==typeof e.extend)return e.extend(t,n);var o=document.createRange(),r=document.createRange(),a=document.createRange();return r.setStart(e.anchorNode,e.anchorOffset),a.setStart(t,n),a.compareBoundaryPoints(window.Range.START_TO_START,r)>=0?(o.setStart(e.anchorNode,e.anchorOffset),o.setEnd(t,n)):(o.setStart(t,n),o.setEnd(e.anchorNode,e.anchorOffset)),e.removeAllRanges(),e.addRange(o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=extendSelection},{}],37:[function(require,module,exports){"use strict";function findClosestNode(e,t){if("function"==typeof e.closest)return e.closest(t);var o=(e.document||e.ownerDocument).querySelectorAll(t),n=e,r=void 0;do{for(r=o.length;--r>=0&&o.item(r)!==n;);}while(r<0&&(n=n.parentElement));return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=findClosestNode},{}],38:[function(require,module,exports){"use strict";function findDOMNode(e){_slate.Node.isNode(e)&&(e=e.key);var o=window.document.querySelector('[data-key="'+e+'"]');if(!o)throw new Error('Unable to find a DOM node for "'+e+'". This is often because of forgetting to add `props.attributes` to a component returned from `renderNode`.');return o}Object.defineProperty(exports,"__esModule",{value:!0});var _slate=window.Slate;exports.default=findDOMNode},{}],39:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function findDropPoint(e,t){var i=t.document,n=e.nativeEvent,o=e.target,r=n.x,d=n.y,f=(0,_getWindow2.default)(o),a=void 0,s=void 0;if(f.document.caretRangeFromPoint){var u=f.document.caretRangeFromPoint(r,d);a=u.startContainer,s=u.startOffset}else{var l=f.document.caretPositionFromPoint(r,d);a=l.offsetNode,s=l.offset}var g=(0,_findClosestNode2.default)(a,"[data-key]"),c=g.getAttribute("data-key"),_=i.key===c?i:i.getDescendant(c);if(_.isVoid&&"inline"===_.kind){var v=g.getBoundingClientRect(),P=r-v.left<v.left+v.width-r,k=P?i.getPreviousSibling(c):i.getNextSibling(c);return{key:k.key,offset:P?k.characters.size:0}}if(_.isVoid){var p=g.getBoundingClientRect();if(d-p.top<p.top+p.height-d){var y=i.getPreviousBlock(c),R=y.getLastText();return{key:R.key,offset:R.characters.size}}return{key:i.getNextBlock(c).getLastText().key,offset:0}}return(0,_findPoint2.default)(a,s,t)}Object.defineProperty(exports,"__esModule",{value:!0});var _getWindow=require("get-window"),_getWindow2=_interopRequireDefault(_getWindow),_findClosestNode=require("./find-closest-node"),_findClosestNode2=_interopRequireDefault(_findClosestNode),_findPoint=require("./find-point"),_findPoint2=_interopRequireDefault(_findPoint);exports.default=findDropPoint},{"./find-closest-node":37,"./find-point":41,"get-window":5}],40:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function findNativePoint(e,t){var o=(0,_findDomNode2.default)(e);if(!o)return null;for(var d=(0,_getWindow2.default)(o),i=d.document.createNodeIterator(o,NodeFilter.SHOW_TEXT),n=0,r=void 0;r=i.nextNode();){var u=r.textContent.length,f=n+u;if(t<=f){return{node:r,offset:t-n}}n=f}return 1==o.childNodes.length&&1==o.childNodes[0].childNodes.length&&"BR"==o.childNodes[0].childNodes[0].tagName?{node:o.childNodes[0],offset:0}:null}Object.defineProperty(exports,"__esModule",{value:!0});var _getWindow=require("get-window"),_getWindow2=_interopRequireDefault(_getWindow),_findDomNode=require("./find-dom-node"),_findDomNode2=_interopRequireDefault(_findDomNode);exports.default=findNativePoint},{"./find-dom-node":38,"get-window":5}],41:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function findPoint(e,t,o){var n=(0,_normalizeNodeAndOffset2.default)(e,t),d=n.node,f=n.offset,r=(0,_getWindow2.default)(e),i=d.parentNode,a=(0,_findClosestNode2.default)(i,RANGE_SELECTOR),s=void 0,_=void 0;if(a){var l=r.document.createRange(),u=(0,_findClosestNode2.default)(a,TEXT_SELECTOR);l.setStart(u,0),l.setEnd(d,f),_=u,s=l.toString().length}else{var E=(0,_findClosestNode2.default)(i,VOID_SELECTOR);if(!E)return null;a=E.querySelector(RANGE_SELECTOR),_=a,s=_.textContent.length}var T=a.getAttribute(OFFSET_KEY_ATTRIBUTE);if(!T)return null;var R=_offsetKey2.default.parse(T),O=R.key;return o.document.hasDescendant(O)?{key:O,offset:s}:null}Object.defineProperty(exports,"__esModule",{value:!0});var _getWindow=require("get-window"),_getWindow2=_interopRequireDefault(_getWindow),_offsetKey=require("./offset-key"),_offsetKey2=_interopRequireDefault(_offsetKey),_normalizeNodeAndOffset=require("./normalize-node-and-offset"),_normalizeNodeAndOffset2=_interopRequireDefault(_normalizeNodeAndOffset),_findClosestNode=require("./find-closest-node"),_findClosestNode2=_interopRequireDefault(_findClosestNode),OFFSET_KEY_ATTRIBUTE="data-offset-key",RANGE_SELECTOR="["+OFFSET_KEY_ATTRIBUTE+"]",TEXT_SELECTOR="[data-key]",VOID_SELECTOR="[data-slate-void]";exports.default=findPoint},{"./find-closest-node":37,"./normalize-node-and-offset":45,"./offset-key":46,"get-window":5}],42:[function(require,module,exports){"use strict";function getHtmlFromNativePaste(e,t){var o=(0,_reactDom.findDOMNode)(e),r=o.cloneNode();r.setAttribute("class",""),r.setAttribute("style","position: fixed; left: -9999px"),o.parentNode.insertBefore(r,o),r.focus(),setTimeout(function(){if(r.childElementCount>0){var e=r.innerHTML;r.parentNode.removeChild(r),t(e)}else t()},0)}Object.defineProperty(exports,"__esModule",{value:!0});var _reactDom=window.ReactDOM;exports.default=getHtmlFromNativePaste},{}],43:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getTransferData(e){var t=getType(e,_transferTypes2.default.FRAGMENT),r=getType(e,_transferTypes2.default.NODE),a=getType(e,"text/html"),n=getType(e,"text/rtf"),l=getType(e,"text/plain"),i=void 0;if(!t&&a&&~a.indexOf(' data-slate-fragment="')){var s=FRAGMENT_MATCHER.exec(a),f=_slicedToArray(s,2),u=(f[0],f[1]);u&&(t=u)}if(l){var o=getEmbeddedTypes(l);o[_transferTypes2.default.FRAGMENT]&&(t=o[_transferTypes2.default.FRAGMENT]),o[_transferTypes2.default.NODE]&&(r=o[_transferTypes2.default.NODE]),o["text/plain"]&&(l=o["text/plain"])}t&&(t=_slateBase64Serializer2.default.deserializeNode(t)),r&&(r=_slateBase64Serializer2.default.deserializeNode(r));try{e.items&&e.items.length?i=Array.from(e.items).map(function(e){return"file"==e.kind?e.getAsFile():null}).filter(function(e){return e}):e.files&&e.files.length&&(i=Array.from(e.files))}catch(t){e.files&&e.files.length&&(i=Array.from(e.files))}var d={files:i,fragment:t,html:a,node:r,rich:n,text:l};return d.type=getTransferType(d),d}function getEmbeddedTypes(e){var t="SLATE-DATA-EMBED::";if(e.substring(0,t.length)!==t)return{"text/plain":e};try{return JSON.parse(e.substring(t.length))}catch(e){throw new Error("Unable to parse custom embedded drag data")}}function getTransferType(e){return e.fragment?"fragment":e.node?"node":e.rich&&e.html?"html":e.rich&&e.text?"text":e.files&&e.files.length?"files":e.html?"html":e.text?"text":"unknown"}function getType(e,t){return e.types&&e.types.length?-1!==e.types.indexOf(t)?e.getData(t)||null:null:"text/plain"===t?e.getData("Text")||null:null}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var r=[],a=!0,n=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,l=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw l}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_slateBase64Serializer=require("slate-base64-serializer"),_slateBase64Serializer2=_interopRequireDefault(_slateBase64Serializer),_transferTypes=require("../constants/transfer-types"),_transferTypes2=_interopRequireDefault(_transferTypes),FRAGMENT_MATCHER=/ data-slate-fragment="([^\s"]+)"/;exports.default=getTransferData},{"../constants/transfer-types":33,"slate-base64-serializer":21}],44:[function(require,module,exports){"use strict";function noop(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=noop},{}],45:[function(require,module,exports){"use strict";function normalizeNodeAndOffset(e,d){if(1==e.nodeType&&e.childNodes.length){var t=d==e.childNodes.length,o=t?"backward":"forward",n=t?d-1:d;for(e=getEditableChild(e,n,o);1==e.nodeType&&e.childNodes.length;){e=getEditableChild(e,t?e.childNodes.length-1:0,o)}d=t?e.textContent.length:0}return{node:e,offset:d}}function getEditableChild(e,d,t){for(var o=e.childNodes,n=o[d],l=d,r=!1,i=!1;(8==n.nodeType||1==n.nodeType&&0==n.childNodes.length||1==n.nodeType&&"false"==n.getAttribute("contenteditable"))&&(!r||!i);)l>=o.length?(r=!0,l=d-1,t="backward"):l<0?(i=!0,l=d+1,t="forward"):(n=o[l],"forward"==t&&l++,"backward"==t&&l--);return n||null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=normalizeNodeAndOffset},{}],46:[function(require,module,exports){"use strict";function parse(r){var e=PARSER.exec(r);if(!e)throw new Error('Invalid offset key string "'+r+'".');var t=_slicedToArray(e,3),n=(t[0],t[1]),i=t[2];return{key:n,index:parseInt(i,10)}}function stringify(r){return r.key+"-"+r.index}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function r(r,e){var t=[],n=!0,i=!1,a=void 0;try{for(var o,u=r[Symbol.iterator]();!(n=(o=u.next()).done)&&(t.push(o.value),!e||t.length!==e);n=!0);}catch(r){i=!0,a=r}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return t}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),PARSER=/^(\w+)(?:-(\d+))?$/;exports.default={parse:parse,stringify:stringify}},{}],47:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function scrollToSelection(e){if(e.anchorNode){var t=(0,_getWindow2.default)(e.anchorNode),o=(0,_selectionIsBackward2.default)(e),i=e.getRangeAt(0),r=i.getBoundingClientRect(),n=t.innerWidth,a=t.innerHeight,l=t.pageYOffset,c=t.pageXOffset,d=(o?r.top:r.bottom)+l,s=(o?r.left:r.right)+c,u=s<c||n+c<s?s-n/2:c,f=d<l||a+l<d?d-a/2:l;t.scrollTo(u,f)}}Object.defineProperty(exports,"__esModule",{value:!0});var _getWindow=require("get-window"),_getWindow2=_interopRequireDefault(_getWindow),_selectionIsBackward=require("selection-is-backward"),_selectionIsBackward2=_interopRequireDefault(_selectionIsBackward);exports.default=scrollToSelection},{"get-window":5,"selection-is-backward":20}],48:[function(require,module,exports){"use strict";function setTransferData(t,e,a){try{t.setData(e,a)}catch(l){var r="SLATE-DATA-EMBED::",s=t.getData("text/plain"),n={};if(s.substring(0,r.length)===r)try{n=JSON.parse(s.substring(r.length))}catch(t){throw new Error("Failed to parse Slate data from `DataTransfer` object.")}else n["text/plain"]=s;n[e]=a;var i=""+r+JSON.stringify(n);t.setData("text/plain",i)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=setTransferData},{}]},{},[34])(34)});
